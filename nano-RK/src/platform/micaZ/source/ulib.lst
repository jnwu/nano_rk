   1               		.file	"ulib.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__ = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
  10               		.text
  11               	.Ltext0:
 120               	.global	getc0
 122               	getc0:
 123               		.stabd	46,0,0
   1:../../../src/platform/micaZ/source/ulib.c **** /******************************************************************************
   2:../../../src/platform/micaZ/source/ulib.c **** *  Nano-RK, a real-time operating system for sensor networks.
   3:../../../src/platform/micaZ/source/ulib.c **** *  Copyright (C) 2007, Real-Time and Multimedia Lab, Carnegie Mellon University
   4:../../../src/platform/micaZ/source/ulib.c **** *  All rights reserved.
   5:../../../src/platform/micaZ/source/ulib.c **** *
   6:../../../src/platform/micaZ/source/ulib.c **** *  This is the Open Source Version of Nano-RK included as part of a Dual
   7:../../../src/platform/micaZ/source/ulib.c **** *  Licensing Model. If you are unsure which license to use please refer to:
   8:../../../src/platform/micaZ/source/ulib.c **** *  http://www.nanork.org/nano-RK/wiki/Licensing
   9:../../../src/platform/micaZ/source/ulib.c **** *
  10:../../../src/platform/micaZ/source/ulib.c **** *  This program is free software: you can redistribute it and/or modify
  11:../../../src/platform/micaZ/source/ulib.c **** *  it under the terms of the GNU General Public License as published by
  12:../../../src/platform/micaZ/source/ulib.c **** *  the Free Software Foundation, version 2.0 of the License.
  13:../../../src/platform/micaZ/source/ulib.c **** *
  14:../../../src/platform/micaZ/source/ulib.c **** *  This program is distributed in the hope that it will be useful,
  15:../../../src/platform/micaZ/source/ulib.c **** *  but WITHOUT ANY WARRANTY; without even the implied warranty of
  16:../../../src/platform/micaZ/source/ulib.c **** *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  17:../../../src/platform/micaZ/source/ulib.c **** *  GNU General Public License for more details.
  18:../../../src/platform/micaZ/source/ulib.c **** *
  19:../../../src/platform/micaZ/source/ulib.c **** *  You should have received a copy of the GNU General Public License
  20:../../../src/platform/micaZ/source/ulib.c **** *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  21:../../../src/platform/micaZ/source/ulib.c **** *
  22:../../../src/platform/micaZ/source/ulib.c **** *  Contributing Authors (specific to this file):
  23:../../../src/platform/micaZ/source/ulib.c **** *  Anthony Rowe
  24:../../../src/platform/micaZ/source/ulib.c **** *  Nuno Pereira
  25:../../../src/platform/micaZ/source/ulib.c **** *  Chipcon Development Team
  26:../../../src/platform/micaZ/source/ulib.c **** *  Peter Diener
  27:../../../src/platform/micaZ/source/ulib.c **** *******************************************************************************/
  28:../../../src/platform/micaZ/source/ulib.c **** 
  29:../../../src/platform/micaZ/source/ulib.c **** 
  30:../../../src/platform/micaZ/source/ulib.c **** #include <include.h>
  31:../../../src/platform/micaZ/source/ulib.c **** #include <ulib.h>
  32:../../../src/platform/micaZ/source/ulib.c **** #include <stdio.h>
  33:../../../src/platform/micaZ/source/ulib.c **** #include <hal.h>
  34:../../../src/platform/micaZ/source/ulib.c **** #include <hal_micaZ.h>
  35:../../../src/platform/micaZ/source/ulib.c **** #include <avr/interrupt.h>
  36:../../../src/platform/micaZ/source/ulib.c **** #include <nrk_pin_define.h>
  37:../../../src/platform/micaZ/source/ulib.c **** #include <nrk_error.h>
  38:../../../src/platform/micaZ/source/ulib.c **** #include <nrk_events.h>
  39:../../../src/platform/micaZ/source/ulib.c **** 
  40:../../../src/platform/micaZ/source/ulib.c **** #ifdef NANORK
  41:../../../src/platform/micaZ/source/ulib.c **** #include <nrk_cfg.h>
  42:../../../src/platform/micaZ/source/ulib.c **** #endif
  43:../../../src/platform/micaZ/source/ulib.c **** 
  44:../../../src/platform/micaZ/source/ulib.c **** #ifdef NRK_UART_BUF
  45:../../../src/platform/micaZ/source/ulib.c **** #include <nrk_events.h>
  46:../../../src/platform/micaZ/source/ulib.c **** 
  47:../../../src/platform/micaZ/source/ulib.c **** #ifndef MAX_RX_UART_BUF
  48:../../../src/platform/micaZ/source/ulib.c **** #define MAX_RX_UART_BUF    16
  49:../../../src/platform/micaZ/source/ulib.c **** #endif
  50:../../../src/platform/micaZ/source/ulib.c **** 
  51:../../../src/platform/micaZ/source/ulib.c **** 
  52:../../../src/platform/micaZ/source/ulib.c **** uint8_t uart_rx_buf_start,uart_rx_buf_end;
  53:../../../src/platform/micaZ/source/ulib.c **** char uart_rx_buf[MAX_RX_UART_BUF];
  54:../../../src/platform/micaZ/source/ulib.c **** nrk_sig_t uart_rx_signal;
  55:../../../src/platform/micaZ/source/ulib.c **** 
  56:../../../src/platform/micaZ/source/ulib.c **** SIGNAL(USART0_RX_vect)
  57:../../../src/platform/micaZ/source/ulib.c **** {
  58:../../../src/platform/micaZ/source/ulib.c ****     char c;
  59:../../../src/platform/micaZ/source/ulib.c ****     //uint8_t sig;
  60:../../../src/platform/micaZ/source/ulib.c ****     DISABLE_UART0_RX_INT();
  61:../../../src/platform/micaZ/source/ulib.c ****     UART0_WAIT_AND_RECEIVE(c);
  62:../../../src/platform/micaZ/source/ulib.c ****     uart_rx_buf[uart_rx_buf_end]=c;
  63:../../../src/platform/micaZ/source/ulib.c ****     //if(uart_rx_buf_end==uart_rx_buf_start) sig=1; else sig=0;
  64:../../../src/platform/micaZ/source/ulib.c ****     uart_rx_buf_end++;
  65:../../../src/platform/micaZ/source/ulib.c ****     if(uart_rx_buf_end==MAX_RX_UART_BUF) uart_rx_buf_end=0;
  66:../../../src/platform/micaZ/source/ulib.c ****     nrk_event_signal(uart_rx_signal);
  67:../../../src/platform/micaZ/source/ulib.c ****     CLEAR_UART0_RX_INT();
  68:../../../src/platform/micaZ/source/ulib.c ****     ENABLE_UART0_RX_INT();
  69:../../../src/platform/micaZ/source/ulib.c **** }
  70:../../../src/platform/micaZ/source/ulib.c **** 
  71:../../../src/platform/micaZ/source/ulib.c **** char getc0()
  72:../../../src/platform/micaZ/source/ulib.c **** {
  73:../../../src/platform/micaZ/source/ulib.c ****     char tmp;
  74:../../../src/platform/micaZ/source/ulib.c **** 
  75:../../../src/platform/micaZ/source/ulib.c ****     if(uart_rx_buf_start!=uart_rx_buf_end)
  76:../../../src/platform/micaZ/source/ulib.c ****     {
  77:../../../src/platform/micaZ/source/ulib.c ****         tmp=uart_rx_buf[uart_rx_buf_start];
  78:../../../src/platform/micaZ/source/ulib.c ****         uart_rx_buf_start++;
  79:../../../src/platform/micaZ/source/ulib.c ****         if(uart_rx_buf_start==MAX_RX_UART_BUF) uart_rx_buf_start=0;
  80:../../../src/platform/micaZ/source/ulib.c ****         return(tmp);
  81:../../../src/platform/micaZ/source/ulib.c ****     }
  82:../../../src/platform/micaZ/source/ulib.c **** // if buffer empty, then we have to block for it
  83:../../../src/platform/micaZ/source/ulib.c ****     UART0_WAIT_AND_RECEIVE(tmp);
  84:../../../src/platform/micaZ/source/ulib.c ****     return tmp;
  85:../../../src/platform/micaZ/source/ulib.c **** }
  86:../../../src/platform/micaZ/source/ulib.c **** 
  87:../../../src/platform/micaZ/source/ulib.c **** uint8_t nrk_uart_data_ready(uint8_t uart_num)
  88:../../../src/platform/micaZ/source/ulib.c **** {
  89:../../../src/platform/micaZ/source/ulib.c ****     if(uart_num==0)
  90:../../../src/platform/micaZ/source/ulib.c ****     {
  91:../../../src/platform/micaZ/source/ulib.c ****         if(uart_rx_buf_start!=uart_rx_buf_end) return 1;
  92:../../../src/platform/micaZ/source/ulib.c ****     }
  93:../../../src/platform/micaZ/source/ulib.c ****     if(uart_num==1)
  94:../../../src/platform/micaZ/source/ulib.c ****     {
  95:../../../src/platform/micaZ/source/ulib.c ****         if( UCSR1A & BM(RXC1) ) return 1;
  96:../../../src/platform/micaZ/source/ulib.c ****     }
  97:../../../src/platform/micaZ/source/ulib.c ****     return 0;
  98:../../../src/platform/micaZ/source/ulib.c **** }
  99:../../../src/platform/micaZ/source/ulib.c **** 
 100:../../../src/platform/micaZ/source/ulib.c **** nrk_sig_t nrk_uart_rx_signal_get()
 101:../../../src/platform/micaZ/source/ulib.c **** {
 102:../../../src/platform/micaZ/source/ulib.c ****     if(uart_rx_signal==NRK_ERROR) nrk_error_add(NRK_SIGNAL_CREATE_ERROR);
 103:../../../src/platform/micaZ/source/ulib.c ****     return uart_rx_signal;
 104:../../../src/platform/micaZ/source/ulib.c **** }
 105:../../../src/platform/micaZ/source/ulib.c **** 
 106:../../../src/platform/micaZ/source/ulib.c **** #else
 107:../../../src/platform/micaZ/source/ulib.c **** 
 108:../../../src/platform/micaZ/source/ulib.c **** nrk_sig_t nrk_uart_rx_signal_get()
 109:../../../src/platform/micaZ/source/ulib.c **** {
 110:../../../src/platform/micaZ/source/ulib.c ****     return NRK_ERROR;
 111:../../../src/platform/micaZ/source/ulib.c **** }
 112:../../../src/platform/micaZ/source/ulib.c **** 
 113:../../../src/platform/micaZ/source/ulib.c **** 
 114:../../../src/platform/micaZ/source/ulib.c **** uint8_t nrk_uart_data_ready(uint8_t uart_num)
 115:../../../src/platform/micaZ/source/ulib.c **** {
 116:../../../src/platform/micaZ/source/ulib.c ****     if(uart_num==0)
 117:../../../src/platform/micaZ/source/ulib.c ****     {
 118:../../../src/platform/micaZ/source/ulib.c ****         if( UCSR0A & BM(RXC0) ) return 1;
 119:../../../src/platform/micaZ/source/ulib.c ****     }
 120:../../../src/platform/micaZ/source/ulib.c ****     if(uart_num==1)
 121:../../../src/platform/micaZ/source/ulib.c ****     {
 122:../../../src/platform/micaZ/source/ulib.c ****         if( UCSR1A & BM(RXC1) ) return 1;
 123:../../../src/platform/micaZ/source/ulib.c ****     }
 124:../../../src/platform/micaZ/source/ulib.c ****     return 0;
 125:../../../src/platform/micaZ/source/ulib.c **** }
 126:../../../src/platform/micaZ/source/ulib.c **** 
 127:../../../src/platform/micaZ/source/ulib.c **** char getc0(void)
 128:../../../src/platform/micaZ/source/ulib.c **** {
 125               	.LM0:
 126               	.LFBB1:
 127               	/* prologue: function */
 128               	/* frame size = 0 */
 129               	/* stack size = 0 */
 130               	.L__stack_usage = 0
 131               	.L2:
 129:../../../src/platform/micaZ/source/ulib.c ****     unsigned char tmp;
 130:../../../src/platform/micaZ/source/ulib.c ****     UART0_WAIT_AND_RECEIVE(tmp);
 133               	.LM1:
 134 0000 5F9B      		sbis 43-32,7
 135 0002 00C0      		rjmp .L2
 137               	.LM2:
 138 0004 5F98      		cbi 43-32,7
 139 0006 8CB1      		in r24,44-32
 140               	/* epilogue start */
 131:../../../src/platform/micaZ/source/ulib.c ****     return tmp;
 132:../../../src/platform/micaZ/source/ulib.c **** }
 142               	.LM3:
 143 0008 0895      		ret
 148               	.Lscope1:
 150               		.stabd	78,0,0
 153               	.global	putc0
 155               	putc0:
 156               		.stabd	46,0,0
 133:../../../src/platform/micaZ/source/ulib.c **** 
 134:../../../src/platform/micaZ/source/ulib.c **** #endif
 135:../../../src/platform/micaZ/source/ulib.c **** 
 136:../../../src/platform/micaZ/source/ulib.c **** void nrk_kprintf( const char *addr)
 137:../../../src/platform/micaZ/source/ulib.c **** {
 138:../../../src/platform/micaZ/source/ulib.c ****     char c;
 139:../../../src/platform/micaZ/source/ulib.c ****     while((c=pgm_read_byte(addr++)))
 140:../../../src/platform/micaZ/source/ulib.c ****         putchar(c);
 141:../../../src/platform/micaZ/source/ulib.c **** }
 142:../../../src/platform/micaZ/source/ulib.c **** 
 143:../../../src/platform/micaZ/source/ulib.c **** 
 144:../../../src/platform/micaZ/source/ulib.c **** void nrk_setup_ports()
 145:../../../src/platform/micaZ/source/ulib.c **** {
 146:../../../src/platform/micaZ/source/ulib.c ****     PORT_INIT();
 147:../../../src/platform/micaZ/source/ulib.c ****     SPI_INIT();
 148:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: switch off all LEDs
 149:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(0);
 150:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(1);
 151:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(2);
 152:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(3);
 153:../../../src/platform/micaZ/source/ulib.c **** }
 154:../../../src/platform/micaZ/source/ulib.c **** 
 155:../../../src/platform/micaZ/source/ulib.c **** 
 156:../../../src/platform/micaZ/source/ulib.c **** 
 157:../../../src/platform/micaZ/source/ulib.c **** 
 158:../../../src/platform/micaZ/source/ulib.c **** //---------------------------------------------------------------------------------------------
 159:../../../src/platform/micaZ/source/ulib.c **** // GPIO related definitions
 160:../../../src/platform/micaZ/source/ulib.c **** 
 161:../../../src/platform/micaZ/source/ulib.c **** //-------------------------------
 162:../../../src/platform/micaZ/source/ulib.c **** // Define nrk pins mappings to hardware pins and ports
 163:../../../src/platform/micaZ/source/ulib.c **** 
 164:../../../src/platform/micaZ/source/ulib.c **** 
 165:../../../src/platform/micaZ/source/ulib.c **** //-------------------------------
 166:../../../src/platform/micaZ/source/ulib.c **** // Port A
 167:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( LED_0, LED_0, NRK_PORTA )
 168:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( LED_1, LED_1, NRK_PORTA )
 169:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( LED_2, LED_2, NRK_PORTA )
 170:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( VREG_EN, VREG_EN, NRK_PORTA )
 171:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( RESET_N, RESET_N, NRK_PORTA )
 172:../../../src/platform/micaZ/source/ulib.c **** 
 173:../../../src/platform/micaZ/source/ulib.c **** //-------------------------------
 174:../../../src/platform/micaZ/source/ulib.c **** // Port B
 175:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( CSN, CSN, NRK_PORTB )
 176:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( SCK, SCK, NRK_PORTB )
 177:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( MOSI, MOSI, NRK_PORTB )
 178:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( MISO, MISO, NRK_PORTB )
 179:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( FIFO, FIFO, NRK_PORTB )
 180:../../../src/platform/micaZ/source/ulib.c **** 
 181:../../../src/platform/micaZ/source/ulib.c **** //-------------------------------
 182:../../../src/platform/micaZ/source/ulib.c **** // Port D
 183:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( UART1_RXD, UART1_RXD, NRK_PORTD )
 184:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( UART1_TXD, UART1_TXD, NRK_PORTD )
 185:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( SFD, SFD, NRK_PORTD )
 186:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( UART1_RTS, UART1_RTS, NRK_PORTD )
 187:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( CCA, CCA, NRK_PORTD )
 188:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( UART1_CTS, UART1_CTS, NRK_PORTD )
 189:../../../src/platform/micaZ/source/ulib.c **** //-------------------------------
 190:../../../src/platform/micaZ/source/ulib.c **** // Port E
 191:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( UART0_RXD, UART0_RXD, NRK_PORTE )
 192:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( UART0_TXD, UART0_TXD, NRK_PORTE )
 193:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( FIFOP, FIFOP, NRK_PORTE )
 194:../../../src/platform/micaZ/source/ulib.c **** //-------------------------------
 195:../../../src/platform/micaZ/source/ulib.c **** // Port F
 196:../../../src/platform/micaZ/source/ulib.c **** // ADC inputs
 197:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( ADC_INPUT_0, ADC_INPUT_0, NRK_PORTF )
 198:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( ADC_INPUT_1, ADC_INPUT_1, NRK_PORTF )
 199:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( ADC_INPUT_2, ADC_INPUT_2, NRK_PORTF )
 200:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( ADC_INPUT_3, ADC_INPUT_3, NRK_PORTF )
 201:../../../src/platform/micaZ/source/ulib.c **** 
 202:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( ADC_INPUT_6, 6, NRK_PORTF )
 203:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( ADC_INPUT_7, 7, NRK_PORTF )
 204:../../../src/platform/micaZ/source/ulib.c **** 
 205:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( DEBUG_0, DEBUG_0, NRK_PORTC )
 206:../../../src/platform/micaZ/source/ulib.c **** NRK_PIN( DEBUG_1, DEBUG_1, NRK_PORTC )
 207:../../../src/platform/micaZ/source/ulib.c **** 
 208:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( DEBUG_2 )
 209:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( DEBUG_3 )
 210:../../../src/platform/micaZ/source/ulib.c **** 
 211:../../../src/platform/micaZ/source/ulib.c **** // pins that do not exist in this platform
 212:../../../src/platform/micaZ/source/ulib.c **** //NRK_INVALID_PIN( DEBUG_0 )
 213:../../../src/platform/micaZ/source/ulib.c **** //NRK_INVALID_PIN( DEBUG_1 )
 214:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( LED_3 )
 215:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( BLED )
 216:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( SPI_SS )
 217:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( GPIO26 )
 218:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( GPIO28 )
 219:../../../src/platform/micaZ/source/ulib.c **** NRK_INVALID_PIN( GPIO34 )
 220:../../../src/platform/micaZ/source/ulib.c **** 
 221:../../../src/platform/micaZ/source/ulib.c **** //-------------------------------
 222:../../../src/platform/micaZ/source/ulib.c **** // GPIO handling functions
 223:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_gpio_set(uint8_t pin)
 224:../../../src/platform/micaZ/source/ulib.c **** {
 225:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: Readability optimization
 226:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = BM((pin & 0xF8) >> 3);
 227:../../../src/platform/micaZ/source/ulib.c **** 
 228:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 229:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 230:../../../src/platform/micaZ/source/ulib.c ****     {
 231:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA: PORTA |= bitvalue;
 232:../../../src/platform/micaZ/source/ulib.c ****             break;
 233:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB: PORTB |= bitvalue;
 234:../../../src/platform/micaZ/source/ulib.c ****             break;
 235:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC: PORTC |= bitvalue;
 236:../../../src/platform/micaZ/source/ulib.c ****             break;
 237:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD: PORTD |= bitvalue;
 238:../../../src/platform/micaZ/source/ulib.c ****             break;
 239:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE: PORTE |= bitvalue;
 240:../../../src/platform/micaZ/source/ulib.c ****             break;
 241:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF: PORTF |= bitvalue;
 242:../../../src/platform/micaZ/source/ulib.c ****             break;
 243:../../../src/platform/micaZ/source/ulib.c ****         default:
 244:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 245:../../../src/platform/micaZ/source/ulib.c ****     }
 246:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 247:../../../src/platform/micaZ/source/ulib.c **** }
 248:../../../src/platform/micaZ/source/ulib.c **** 
 249:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_gpio_clr(uint8_t pin)
 250:../../../src/platform/micaZ/source/ulib.c **** {
 251:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: Readability optimization
 252:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = ~BM((pin & 0xF8) >> 3);
 253:../../../src/platform/micaZ/source/ulib.c **** 
 254:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 255:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 256:../../../src/platform/micaZ/source/ulib.c ****     {
 257:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA: PORTA &= bitvalue;
 258:../../../src/platform/micaZ/source/ulib.c ****             break;
 259:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB: PORTB &= bitvalue;
 260:../../../src/platform/micaZ/source/ulib.c ****             break;
 261:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC: PORTC &= bitvalue;
 262:../../../src/platform/micaZ/source/ulib.c ****             break;
 263:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD: PORTD &= bitvalue;
 264:../../../src/platform/micaZ/source/ulib.c ****             break;
 265:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE: PORTE &= bitvalue;
 266:../../../src/platform/micaZ/source/ulib.c ****             break;
 267:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF: PORTF &= bitvalue;
 268:../../../src/platform/micaZ/source/ulib.c ****             break;
 269:../../../src/platform/micaZ/source/ulib.c ****         default:
 270:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 271:../../../src/platform/micaZ/source/ulib.c ****     }
 272:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 273:../../../src/platform/micaZ/source/ulib.c **** }
 274:../../../src/platform/micaZ/source/ulib.c **** 
 275:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_gpio_get(uint8_t pin)
 276:../../../src/platform/micaZ/source/ulib.c **** {
 277:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 278:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 279:../../../src/platform/micaZ/source/ulib.c ****     {
 280:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA:
 281:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINA & BM((pin & 0xF8) >> 3));
 282:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB:
 283:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINB & BM((pin & 0xF8) >> 3));
 284:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC:
 285:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINC & BM((pin & 0xF8) >> 3));
 286:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD:
 287:../../../src/platform/micaZ/source/ulib.c ****             return !!(PIND & BM((pin & 0xF8) >> 3));
 288:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE:
 289:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINE & BM((pin & 0xF8) >> 3));
 290:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF:
 291:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINF & BM((pin & 0xF8) >> 3));
 292:../../../src/platform/micaZ/source/ulib.c ****         default:
 293:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 294:../../../src/platform/micaZ/source/ulib.c ****     }
 295:../../../src/platform/micaZ/source/ulib.c ****     return -1;
 296:../../../src/platform/micaZ/source/ulib.c **** }
 297:../../../src/platform/micaZ/source/ulib.c **** 
 298:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_gpio_pullups(uint8_t enable)
 299:../../../src/platform/micaZ/source/ulib.c **** {
 300:../../../src/platform/micaZ/source/ulib.c ****     if(enable) SFIOR &= ~BM(PUD);
 301:../../../src/platform/micaZ/source/ulib.c ****     else SFIOR |= BM(PUD);
 302:../../../src/platform/micaZ/source/ulib.c ****     return NRK_OK;
 303:../../../src/platform/micaZ/source/ulib.c **** }
 304:../../../src/platform/micaZ/source/ulib.c **** 
 305:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_gpio_toggle(uint8_t pin)
 306:../../../src/platform/micaZ/source/ulib.c **** {
 307:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: Readability and execution time optimization
 308:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = BM((pin & 0xF8) >> 3);
 309:../../../src/platform/micaZ/source/ulib.c **** 
 310:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 311:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 312:../../../src/platform/micaZ/source/ulib.c ****     {
 313:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA: PORTA ^= bitvalue;
 314:../../../src/platform/micaZ/source/ulib.c ****             break;
 315:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB: PORTB ^= bitvalue;
 316:../../../src/platform/micaZ/source/ulib.c ****             break;
 317:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC: PORTC ^= bitvalue;
 318:../../../src/platform/micaZ/source/ulib.c ****             break;
 319:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD: PORTD ^= bitvalue;
 320:../../../src/platform/micaZ/source/ulib.c ****             break;
 321:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE: PORTE ^= bitvalue;
 322:../../../src/platform/micaZ/source/ulib.c ****             break;
 323:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF: PORTF ^= bitvalue;
 324:../../../src/platform/micaZ/source/ulib.c ****             break;
 325:../../../src/platform/micaZ/source/ulib.c ****         default:
 326:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 327:../../../src/platform/micaZ/source/ulib.c ****     }
 328:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 329:../../../src/platform/micaZ/source/ulib.c **** }
 330:../../../src/platform/micaZ/source/ulib.c **** 
 331:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_gpio_direction(uint8_t pin, uint8_t pin_direction)
 332:../../../src/platform/micaZ/source/ulib.c **** {
 333:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: Readability and program space optimization
 334:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = BM((pin & 0xF8) >> 3);
 335:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue_inv = ~BM((pin & 0xF8) >> 3);
 336:../../../src/platform/micaZ/source/ulib.c **** 
 337:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 338:../../../src/platform/micaZ/source/ulib.c ****     if (pin_direction == NRK_PIN_INPUT)
 339:../../../src/platform/micaZ/source/ulib.c ****     {
 340:../../../src/platform/micaZ/source/ulib.c ****         switch (pin & 0x07)
 341:../../../src/platform/micaZ/source/ulib.c ****         {
 342:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA:
 343:../../../src/platform/micaZ/source/ulib.c ****             DDRA &= bitvalue_inv;
 344:../../../src/platform/micaZ/source/ulib.c ****             PORTA |= bitvalue;
 345:../../../src/platform/micaZ/source/ulib.c ****             break;
 346:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB:
 347:../../../src/platform/micaZ/source/ulib.c ****             DDRB &= bitvalue_inv;
 348:../../../src/platform/micaZ/source/ulib.c ****             PORTB |= bitvalue;
 349:../../../src/platform/micaZ/source/ulib.c ****             break;
 350:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC:
 351:../../../src/platform/micaZ/source/ulib.c ****             DDRC &= bitvalue_inv;
 352:../../../src/platform/micaZ/source/ulib.c ****             PORTC |= bitvalue;
 353:../../../src/platform/micaZ/source/ulib.c ****             break;
 354:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD:
 355:../../../src/platform/micaZ/source/ulib.c ****             DDRD &= bitvalue_inv;
 356:../../../src/platform/micaZ/source/ulib.c ****             PORTD |= bitvalue;
 357:../../../src/platform/micaZ/source/ulib.c ****             break;
 358:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE:
 359:../../../src/platform/micaZ/source/ulib.c ****             DDRE &= bitvalue_inv;
 360:../../../src/platform/micaZ/source/ulib.c ****             PORTE |= bitvalue;
 361:../../../src/platform/micaZ/source/ulib.c ****             break;
 362:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF:
 363:../../../src/platform/micaZ/source/ulib.c ****             DDRF &= bitvalue_inv;
 364:../../../src/platform/micaZ/source/ulib.c ****             PORTF |= bitvalue;
 365:../../../src/platform/micaZ/source/ulib.c ****             break;
 366:../../../src/platform/micaZ/source/ulib.c ****         default:
 367:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 368:../../../src/platform/micaZ/source/ulib.c ****         }
 369:../../../src/platform/micaZ/source/ulib.c ****     }
 370:../../../src/platform/micaZ/source/ulib.c ****     else
 371:../../../src/platform/micaZ/source/ulib.c ****     {
 372:../../../src/platform/micaZ/source/ulib.c ****         switch (pin & 0x07)
 373:../../../src/platform/micaZ/source/ulib.c ****         {
 374:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA:
 375:../../../src/platform/micaZ/source/ulib.c ****             DDRA |= bitvalue;
 376:../../../src/platform/micaZ/source/ulib.c ****             break;
 377:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB:
 378:../../../src/platform/micaZ/source/ulib.c ****             DDRB |= bitvalue;
 379:../../../src/platform/micaZ/source/ulib.c ****             break;
 380:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC:
 381:../../../src/platform/micaZ/source/ulib.c ****             DDRC |= bitvalue;
 382:../../../src/platform/micaZ/source/ulib.c ****             break;
 383:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD:
 384:../../../src/platform/micaZ/source/ulib.c ****             DDRD |= bitvalue;
 385:../../../src/platform/micaZ/source/ulib.c ****             break;
 386:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE:
 387:../../../src/platform/micaZ/source/ulib.c ****             DDRE |= bitvalue;
 388:../../../src/platform/micaZ/source/ulib.c ****             break;
 389:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF:
 390:../../../src/platform/micaZ/source/ulib.c ****             DDRF |= bitvalue;
 391:../../../src/platform/micaZ/source/ulib.c ****             break;
 392:../../../src/platform/micaZ/source/ulib.c ****         default:
 393:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 394:../../../src/platform/micaZ/source/ulib.c ****         }
 395:../../../src/platform/micaZ/source/ulib.c ****     }
 396:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 397:../../../src/platform/micaZ/source/ulib.c **** }
 398:../../../src/platform/micaZ/source/ulib.c **** 
 399:../../../src/platform/micaZ/source/ulib.c **** 
 400:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_get_button(uint8_t b)
 401:../../../src/platform/micaZ/source/ulib.c **** {
 402:../../../src/platform/micaZ/source/ulib.c ****     return NRK_ERROR;
 403:../../../src/platform/micaZ/source/ulib.c **** }
 404:../../../src/platform/micaZ/source/ulib.c **** 
 405:../../../src/platform/micaZ/source/ulib.c **** 
 406:../../../src/platform/micaZ/source/ulib.c **** 
 407:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_led_toggle( int led )
 408:../../../src/platform/micaZ/source/ulib.c **** {
 409:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: Execution time optimization
 410:../../../src/platform/micaZ/source/ulib.c **** 
 411:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_toggle(NRK_LED_0);
 412:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_toggle(NRK_LED_1);
 413:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_toggle(NRK_LED_2);
 414:../../../src/platform/micaZ/source/ulib.c ****     else            return -1;
 415:../../../src/platform/micaZ/source/ulib.c **** 
 416:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 417:../../../src/platform/micaZ/source/ulib.c **** }
 418:../../../src/platform/micaZ/source/ulib.c **** 
 419:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_led_clr( int led )
 420:../../../src/platform/micaZ/source/ulib.c **** {
 421:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: Execution time optimization
 422:../../../src/platform/micaZ/source/ulib.c **** 
 423:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_set(NRK_LED_0);
 424:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_set(NRK_LED_1);
 425:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_set(NRK_LED_2);
 426:../../../src/platform/micaZ/source/ulib.c ****     else            return -1;
 427:../../../src/platform/micaZ/source/ulib.c **** 
 428:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 429:../../../src/platform/micaZ/source/ulib.c **** }
 430:../../../src/platform/micaZ/source/ulib.c **** 
 431:../../../src/platform/micaZ/source/ulib.c **** int8_t nrk_led_set( int led )
 432:../../../src/platform/micaZ/source/ulib.c **** {
 433:../../../src/platform/micaZ/source/ulib.c ****     // pdiener: Execution time optimization
 434:../../../src/platform/micaZ/source/ulib.c **** 
 435:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_clr(NRK_LED_0);
 436:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_clr(NRK_LED_1);
 437:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_clr(NRK_LED_2);
 438:../../../src/platform/micaZ/source/ulib.c ****     else            return -1;
 439:../../../src/platform/micaZ/source/ulib.c **** 
 440:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 441:../../../src/platform/micaZ/source/ulib.c **** }
 442:../../../src/platform/micaZ/source/ulib.c **** /*
 443:../../../src/platform/micaZ/source/ulib.c **** void IO_SET_E(uint8_t pin)
 444:../../../src/platform/micaZ/source/ulib.c **** {
 445:../../../src/platform/micaZ/source/ulib.c **** PORTE |= BM(pin);
 446:../../../src/platform/micaZ/source/ulib.c **** }
 447:../../../src/platform/micaZ/source/ulib.c **** 
 448:../../../src/platform/micaZ/source/ulib.c **** void IO_CLR_E(uint8_t pin)
 449:../../../src/platform/micaZ/source/ulib.c **** {
 450:../../../src/platform/micaZ/source/ulib.c **** PORTE &= ~BM(pin);
 451:../../../src/platform/micaZ/source/ulib.c **** }
 452:../../../src/platform/micaZ/source/ulib.c **** 
 453:../../../src/platform/micaZ/source/ulib.c **** void IO_SET_F(uint8_t pin)
 454:../../../src/platform/micaZ/source/ulib.c **** {
 455:../../../src/platform/micaZ/source/ulib.c **** PORTF |= BM(pin);
 456:../../../src/platform/micaZ/source/ulib.c **** }
 457:../../../src/platform/micaZ/source/ulib.c **** 
 458:../../../src/platform/micaZ/source/ulib.c **** void IO_CLR_F(uint8_t pin)
 459:../../../src/platform/micaZ/source/ulib.c **** {
 460:../../../src/platform/micaZ/source/ulib.c **** PORTF &= ~BM(pin);
 461:../../../src/platform/micaZ/source/ulib.c **** }
 462:../../../src/platform/micaZ/source/ulib.c **** */
 463:../../../src/platform/micaZ/source/ulib.c **** 
 464:../../../src/platform/micaZ/source/ulib.c **** void putc0(char x)
 465:../../../src/platform/micaZ/source/ulib.c **** {
 158               	.LM4:
 159               	.LFBB2:
 160               	/* prologue: function */
 161               	/* frame size = 0 */
 162               	/* stack size = 0 */
 163               	.L__stack_usage = 0
 164               	.L5:
 466:../../../src/platform/micaZ/source/ulib.c ****     UART0_WAIT_AND_SEND(x);
 166               	.LM5:
 167 000a 5D9B      		sbis 43-32,5
 168 000c 00C0      		rjmp .L5
 170               	.LM6:
 171 000e 5D98      		cbi 43-32,5
 172 0010 8CB9      		out 44-32,r24
 173               	/* epilogue start */
 467:../../../src/platform/micaZ/source/ulib.c **** }
 175               	.LM7:
 176 0012 0895      		ret
 178               	.Lscope2:
 180               		.stabd	78,0,0
 182               	.global	nrk_uart_rx_signal_get
 184               	nrk_uart_rx_signal_get:
 185               		.stabd	46,0,0
 109:../../../src/platform/micaZ/source/ulib.c **** {
 187               	.LM8:
 188               	.LFBB3:
 189               	/* prologue: function */
 190               	/* frame size = 0 */
 191               	/* stack size = 0 */
 192               	.L__stack_usage = 0
 111:../../../src/platform/micaZ/source/ulib.c **** }
 194               	.LM9:
 195 0014 8FEF      		ldi r24,lo8(-1)
 196               	/* epilogue start */
 197 0016 0895      		ret
 199               	.Lscope3:
 201               		.stabd	78,0,0
 204               	.global	nrk_uart_data_ready
 206               	nrk_uart_data_ready:
 207               		.stabd	46,0,0
 115:../../../src/platform/micaZ/source/ulib.c **** {
 209               	.LM10:
 210               	.LFBB4:
 211               	/* prologue: function */
 212               	/* frame size = 0 */
 213               	/* stack size = 0 */
 214               	.L__stack_usage = 0
 116:../../../src/platform/micaZ/source/ulib.c ****     if(uart_num==0)
 216               	.LM11:
 217 0018 8823      		tst r24
 218 001a 01F4      		brne .L9
 118:../../../src/platform/micaZ/source/ulib.c ****         if( UCSR0A & BM(RXC0) ) return 1;
 220               	.LM12:
 221 001c 8BB1      		in r24,43-32
 222 001e 00C0      		rjmp .L12
 223               	.L9:
 120:../../../src/platform/micaZ/source/ulib.c ****     if(uart_num==1)
 225               	.LM13:
 226 0020 8130      		cpi r24,lo8(1)
 227 0022 01F4      		brne .L11
 122:../../../src/platform/micaZ/source/ulib.c ****         if( UCSR1A & BM(RXC1) ) return 1;
 229               	.LM14:
 230 0024 8091 9B00 		lds r24,155
 231               	.L12:
 114:../../../src/platform/micaZ/source/ulib.c **** uint8_t nrk_uart_data_ready(uint8_t uart_num)
 233               	.LM15:
 234 0028 881F      		rol r24
 235 002a 8827      		clr r24
 236 002c 881F      		rol r24
 237 002e 0895      		ret
 238               	.L11:
 124:../../../src/platform/micaZ/source/ulib.c ****     return 0;
 240               	.LM16:
 241 0030 80E0      		ldi r24,lo8(0)
 125:../../../src/platform/micaZ/source/ulib.c **** }
 243               	.LM17:
 244 0032 0895      		ret
 246               	.Lscope4:
 248               		.stabd	78,0,0
 251               	.global	nrk_kprintf
 253               	nrk_kprintf:
 254               		.stabd	46,0,0
 137:../../../src/platform/micaZ/source/ulib.c **** {
 256               	.LM18:
 257               	.LFBB5:
 258 0034 CF93      		push r28
 259 0036 DF93      		push r29
 260               	/* prologue: function */
 261               	/* frame size = 0 */
 262               	/* stack size = 2 */
 263               	.L__stack_usage = 2
 264 0038 EC01      		movw r28,r24
 139:../../../src/platform/micaZ/source/ulib.c ****     while((c=pgm_read_byte(addr++)))
 266               	.LM19:
 267 003a 00C0      		rjmp .L14
 268               	.L15:
 140:../../../src/platform/micaZ/source/ulib.c ****         putchar(c);
 270               	.LM20:
 271 003c 6091 0000 		lds r22,__iob+2
 272 0040 7091 0000 		lds r23,__iob+2+1
 273 0044 90E0      		ldi r25,lo8(0)
 274 0046 0E94 0000 		call fputc
 275               	.L14:
 140:../../../src/platform/micaZ/source/ulib.c ****         putchar(c);
 277               	.LM21:
 278 004a FE01      		movw r30,r28
 279               	.LBB2:
 139:../../../src/platform/micaZ/source/ulib.c ****     while((c=pgm_read_byte(addr++)))
 281               	.LM22:
 282 004c 2196      		adiw r28,1
 283               	/* #APP */
 284               	 ;  139 "../../../src/platform/micaZ/source/ulib.c" 1
 285 004e 8491      		lpm r24, Z
 286               		
 287               	 ;  0 "" 2
 288               	/* #NOAPP */
 289               	.LBE2:
 290 0050 8823      		tst r24
 291 0052 01F4      		brne .L15
 292               	/* epilogue start */
 141:../../../src/platform/micaZ/source/ulib.c **** }
 294               	.LM23:
 295 0054 DF91      		pop r29
 296 0056 CF91      		pop r28
 297 0058 0895      		ret
 302               	.Lscope5:
 304               		.stabd	78,0,0
 307               	.global	nrk_gpio_set
 309               	nrk_gpio_set:
 310               		.stabd	46,0,0
 224:../../../src/platform/micaZ/source/ulib.c **** {
 312               	.LM24:
 313               	.LFBB6:
 314               	/* prologue: function */
 315               	/* frame size = 0 */
 316               	/* stack size = 0 */
 317               	.L__stack_usage = 0
 228:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 319               	.LM25:
 320 005a 8F3F      		cpi r24,lo8(-1)
 321 005c 01F4      		brne .+2
 322 005e 00C0      		rjmp .L25
 226:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = BM((pin & 0xF8) >> 3);
 324               	.LM26:
 325 0060 982F      		mov r25,r24
 326 0062 9695      		lsr r25
 327 0064 9695      		lsr r25
 328 0066 9695      		lsr r25
 329 0068 21E0      		ldi r18,lo8(1)
 330 006a 30E0      		ldi r19,hi8(1)
 331 006c 00C0      		rjmp 2f
 332 006e 220F      	1:	lsl r18
 333 0070 331F      		rol r19
 334 0072 9A95      	2:	dec r25
 335 0074 02F4      		brpl 1b
 229:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 337               	.LM27:
 338 0076 90E0      		ldi r25,lo8(0)
 339 0078 8770      		andi r24,lo8(7)
 340 007a 9070      		andi r25,hi8(7)
 341 007c 8230      		cpi r24,2
 342 007e 9105      		cpc r25,__zero_reg__
 343 0080 01F0      		breq .L20
 344 0082 8330      		cpi r24,3
 345 0084 9105      		cpc r25,__zero_reg__
 346 0086 04F4      		brge .L24
 347 0088 0097      		sbiw r24,0
 348 008a 01F0      		breq .L18
 349 008c 8130      		cpi r24,1
 350 008e 9105      		cpc r25,__zero_reg__
 351 0090 01F4      		brne .L26
 352 0092 00C0      		rjmp .L29
 353               	.L24:
 354 0094 8430      		cpi r24,4
 355 0096 9105      		cpc r25,__zero_reg__
 356 0098 01F0      		breq .L22
 357 009a 8430      		cpi r24,4
 358 009c 9105      		cpc r25,__zero_reg__
 359 009e 04F0      		brlt .L21
 360 00a0 8530      		cpi r24,5
 361 00a2 9105      		cpc r25,__zero_reg__
 362 00a4 01F4      		brne .L26
 363 00a6 00C0      		rjmp .L30
 364               	.L18:
 231:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA: PORTA |= bitvalue;
 366               	.LM28:
 367 00a8 8BB3      		in r24,59-32
 368 00aa 822B      		or r24,r18
 369 00ac 8BBB      		out 59-32,r24
 370 00ae 00C0      		rjmp .L28
 371               	.L29:
 233:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB: PORTB |= bitvalue;
 373               	.LM29:
 374 00b0 88B3      		in r24,56-32
 375 00b2 822B      		or r24,r18
 376 00b4 88BB      		out 56-32,r24
 377 00b6 00C0      		rjmp .L28
 378               	.L20:
 235:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC: PORTC |= bitvalue;
 380               	.LM30:
 381 00b8 85B3      		in r24,53-32
 382 00ba 822B      		or r24,r18
 383 00bc 85BB      		out 53-32,r24
 384               	.L28:
 246:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 386               	.LM31:
 387 00be 81E0      		ldi r24,lo8(1)
 236:../../../src/platform/micaZ/source/ulib.c ****             break;
 389               	.LM32:
 390 00c0 0895      		ret
 391               	.L21:
 237:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD: PORTD |= bitvalue;
 393               	.LM33:
 394 00c2 82B3      		in r24,50-32
 395 00c4 822B      		or r24,r18
 396 00c6 82BB      		out 50-32,r24
 397 00c8 00C0      		rjmp .L28
 398               	.L22:
 239:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE: PORTE |= bitvalue;
 400               	.LM34:
 401 00ca 83B1      		in r24,35-32
 402 00cc 822B      		or r24,r18
 403 00ce 83B9      		out 35-32,r24
 404 00d0 00C0      		rjmp .L28
 405               	.L30:
 241:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF: PORTF |= bitvalue;
 407               	.LM35:
 408 00d2 8091 6200 		lds r24,98
 409 00d6 822B      		or r24,r18
 410 00d8 8093 6200 		sts 98,r24
 411 00dc 00C0      		rjmp .L28
 412               	.L25:
 228:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 414               	.LM36:
 415 00de 8FEF      		ldi r24,lo8(-1)
 416 00e0 0895      		ret
 417               	.L26:
 244:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 419               	.LM37:
 420 00e2 8FEF      		ldi r24,lo8(-1)
 247:../../../src/platform/micaZ/source/ulib.c **** }
 422               	.LM38:
 423 00e4 0895      		ret
 428               	.Lscope6:
 430               		.stabd	78,0,0
 433               	.global	nrk_gpio_clr
 435               	nrk_gpio_clr:
 436               		.stabd	46,0,0
 250:../../../src/platform/micaZ/source/ulib.c **** {
 438               	.LM39:
 439               	.LFBB7:
 440               	/* prologue: function */
 441               	/* frame size = 0 */
 442               	/* stack size = 0 */
 443               	.L__stack_usage = 0
 254:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 445               	.LM40:
 446 00e6 8F3F      		cpi r24,lo8(-1)
 447 00e8 01F4      		brne .+2
 448 00ea 00C0      		rjmp .L40
 252:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = ~BM((pin & 0xF8) >> 3);
 450               	.LM41:
 451 00ec 982F      		mov r25,r24
 452 00ee 9695      		lsr r25
 453 00f0 9695      		lsr r25
 454 00f2 9695      		lsr r25
 455 00f4 21E0      		ldi r18,lo8(1)
 456 00f6 30E0      		ldi r19,hi8(1)
 457 00f8 00C0      		rjmp 2f
 458 00fa 220F      	1:	lsl r18
 459 00fc 331F      		rol r19
 460 00fe 9A95      	2:	dec r25
 461 0100 02F4      		brpl 1b
 462 0102 2095      		com r18
 255:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 464               	.LM42:
 465 0104 90E0      		ldi r25,lo8(0)
 466 0106 8770      		andi r24,lo8(7)
 467 0108 9070      		andi r25,hi8(7)
 468 010a 8230      		cpi r24,2
 469 010c 9105      		cpc r25,__zero_reg__
 470 010e 01F0      		breq .L35
 471 0110 8330      		cpi r24,3
 472 0112 9105      		cpc r25,__zero_reg__
 473 0114 04F4      		brge .L39
 474 0116 0097      		sbiw r24,0
 475 0118 01F0      		breq .L33
 476 011a 8130      		cpi r24,1
 477 011c 9105      		cpc r25,__zero_reg__
 478 011e 01F4      		brne .L41
 479 0120 00C0      		rjmp .L44
 480               	.L39:
 481 0122 8430      		cpi r24,4
 482 0124 9105      		cpc r25,__zero_reg__
 483 0126 01F0      		breq .L37
 484 0128 8430      		cpi r24,4
 485 012a 9105      		cpc r25,__zero_reg__
 486 012c 04F0      		brlt .L36
 487 012e 8530      		cpi r24,5
 488 0130 9105      		cpc r25,__zero_reg__
 489 0132 01F4      		brne .L41
 490 0134 00C0      		rjmp .L45
 491               	.L33:
 257:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA: PORTA &= bitvalue;
 493               	.LM43:
 494 0136 8BB3      		in r24,59-32
 495 0138 8223      		and r24,r18
 496 013a 8BBB      		out 59-32,r24
 497 013c 00C0      		rjmp .L43
 498               	.L44:
 259:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB: PORTB &= bitvalue;
 500               	.LM44:
 501 013e 88B3      		in r24,56-32
 502 0140 8223      		and r24,r18
 503 0142 88BB      		out 56-32,r24
 504 0144 00C0      		rjmp .L43
 505               	.L35:
 261:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC: PORTC &= bitvalue;
 507               	.LM45:
 508 0146 85B3      		in r24,53-32
 509 0148 8223      		and r24,r18
 510 014a 85BB      		out 53-32,r24
 511               	.L43:
 272:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 513               	.LM46:
 514 014c 81E0      		ldi r24,lo8(1)
 262:../../../src/platform/micaZ/source/ulib.c ****             break;
 516               	.LM47:
 517 014e 0895      		ret
 518               	.L36:
 263:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD: PORTD &= bitvalue;
 520               	.LM48:
 521 0150 82B3      		in r24,50-32
 522 0152 8223      		and r24,r18
 523 0154 82BB      		out 50-32,r24
 524 0156 00C0      		rjmp .L43
 525               	.L37:
 265:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE: PORTE &= bitvalue;
 527               	.LM49:
 528 0158 83B1      		in r24,35-32
 529 015a 8223      		and r24,r18
 530 015c 83B9      		out 35-32,r24
 531 015e 00C0      		rjmp .L43
 532               	.L45:
 267:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF: PORTF &= bitvalue;
 534               	.LM50:
 535 0160 8091 6200 		lds r24,98
 536 0164 8223      		and r24,r18
 537 0166 8093 6200 		sts 98,r24
 538 016a 00C0      		rjmp .L43
 539               	.L40:
 254:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 541               	.LM51:
 542 016c 8FEF      		ldi r24,lo8(-1)
 543 016e 0895      		ret
 544               	.L41:
 270:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 546               	.LM52:
 547 0170 8FEF      		ldi r24,lo8(-1)
 273:../../../src/platform/micaZ/source/ulib.c **** }
 549               	.LM53:
 550 0172 0895      		ret
 555               	.Lscope7:
 557               		.stabd	78,0,0
 560               	.global	nrk_gpio_get
 562               	nrk_gpio_get:
 563               		.stabd	46,0,0
 276:../../../src/platform/micaZ/source/ulib.c **** {
 565               	.LM54:
 566               	.LFBB8:
 567               	/* prologue: function */
 568               	/* frame size = 0 */
 569               	/* stack size = 0 */
 570               	.L__stack_usage = 0
 277:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 572               	.LM55:
 573 0174 8F3F      		cpi r24,lo8(-1)
 574 0176 01F0      		breq .L56
 278:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 576               	.LM56:
 577 0178 282F      		mov r18,r24
 578 017a 30E0      		ldi r19,lo8(0)
 579 017c 2770      		andi r18,lo8(7)
 580 017e 3070      		andi r19,hi8(7)
 581 0180 2230      		cpi r18,2
 582 0182 3105      		cpc r19,__zero_reg__
 583 0184 01F0      		breq .L50
 584 0186 2330      		cpi r18,3
 585 0188 3105      		cpc r19,__zero_reg__
 586 018a 04F4      		brge .L54
 587 018c 2115      		cp r18,__zero_reg__
 588 018e 3105      		cpc r19,__zero_reg__
 589 0190 01F0      		breq .L48
 590 0192 2130      		cpi r18,1
 591 0194 3105      		cpc r19,__zero_reg__
 592 0196 01F4      		brne .L56
 593 0198 00C0      		rjmp .L58
 594               	.L54:
 595 019a 2430      		cpi r18,4
 596 019c 3105      		cpc r19,__zero_reg__
 597 019e 01F0      		breq .L52
 598 01a0 2430      		cpi r18,4
 599 01a2 3105      		cpc r19,__zero_reg__
 600 01a4 04F0      		brlt .L51
 601 01a6 2530      		cpi r18,5
 602 01a8 3105      		cpc r19,__zero_reg__
 603 01aa 01F4      		brne .L56
 604 01ac 00C0      		rjmp .L59
 605               	.L48:
 281:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINA & BM((pin & 0xF8) >> 3));
 607               	.LM57:
 608 01ae 29B3      		in r18,57-32
 609 01b0 00C0      		rjmp .L57
 610               	.L58:
 283:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINB & BM((pin & 0xF8) >> 3));
 612               	.LM58:
 613 01b2 26B3      		in r18,54-32
 614 01b4 00C0      		rjmp .L57
 615               	.L50:
 285:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINC & BM((pin & 0xF8) >> 3));
 617               	.LM59:
 618 01b6 23B3      		in r18,51-32
 619 01b8 00C0      		rjmp .L57
 620               	.L51:
 287:../../../src/platform/micaZ/source/ulib.c ****             return !!(PIND & BM((pin & 0xF8) >> 3));
 622               	.LM60:
 623 01ba 20B3      		in r18,48-32
 624 01bc 00C0      		rjmp .L57
 625               	.L52:
 289:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINE & BM((pin & 0xF8) >> 3));
 627               	.LM61:
 628 01be 21B1      		in r18,33-32
 629 01c0 00C0      		rjmp .L57
 630               	.L59:
 291:../../../src/platform/micaZ/source/ulib.c ****             return !!(PINF & BM((pin & 0xF8) >> 3));
 632               	.LM62:
 633 01c2 20B1      		in r18,32-32
 634               	.L57:
 635 01c4 30E0      		ldi r19,lo8(0)
 636 01c6 8695      		lsr r24
 637 01c8 8695      		lsr r24
 638 01ca 8695      		lsr r24
 639 01cc 00C0      		rjmp 2f
 640 01ce 3595      	1:	asr r19
 641 01d0 2795      		ror r18
 642 01d2 8A95      	2:	dec r24
 643 01d4 02F4      		brpl 1b
 644 01d6 2170      		andi r18,lo8(1)
 645 01d8 00C0      		rjmp .L47
 646               	.L56:
 293:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 648               	.LM63:
 649 01da 2FEF      		ldi r18,lo8(-1)
 650               	.L47:
 296:../../../src/platform/micaZ/source/ulib.c **** }
 652               	.LM64:
 653 01dc 822F      		mov r24,r18
 654               	/* epilogue start */
 655 01de 0895      		ret
 657               	.Lscope8:
 659               		.stabd	78,0,0
 662               	.global	nrk_gpio_pullups
 664               	nrk_gpio_pullups:
 665               		.stabd	46,0,0
 299:../../../src/platform/micaZ/source/ulib.c **** {
 667               	.LM65:
 668               	.LFBB9:
 669               	/* prologue: function */
 670               	/* frame size = 0 */
 671               	/* stack size = 0 */
 672               	.L__stack_usage = 0
 300:../../../src/platform/micaZ/source/ulib.c ****     if(enable) SFIOR &= ~BM(PUD);
 674               	.LM66:
 675 01e0 8823      		tst r24
 676 01e2 01F0      		breq .L61
 300:../../../src/platform/micaZ/source/ulib.c ****     if(enable) SFIOR &= ~BM(PUD);
 678               	.LM67:
 679 01e4 80B5      		in r24,64-32
 680 01e6 8B7F      		andi r24,lo8(-5)
 681 01e8 00C0      		rjmp .L63
 682               	.L61:
 301:../../../src/platform/micaZ/source/ulib.c ****     else SFIOR |= BM(PUD);
 684               	.LM68:
 685 01ea 80B5      		in r24,64-32
 686 01ec 8460      		ori r24,lo8(4)
 687               	.L63:
 688 01ee 80BD      		out 64-32,r24
 303:../../../src/platform/micaZ/source/ulib.c **** }
 690               	.LM69:
 691 01f0 81E0      		ldi r24,lo8(1)
 692               	/* epilogue start */
 693 01f2 0895      		ret
 695               	.Lscope9:
 697               		.stabd	78,0,0
 700               	.global	nrk_gpio_toggle
 702               	nrk_gpio_toggle:
 703               		.stabd	46,0,0
 306:../../../src/platform/micaZ/source/ulib.c **** {
 705               	.LM70:
 706               	.LFBB10:
 707               	/* prologue: function */
 708               	/* frame size = 0 */
 709               	/* stack size = 0 */
 710               	.L__stack_usage = 0
 310:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 712               	.LM71:
 713 01f4 8F3F      		cpi r24,lo8(-1)
 714 01f6 01F4      		brne .+2
 715 01f8 00C0      		rjmp .L73
 308:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = BM((pin & 0xF8) >> 3);
 717               	.LM72:
 718 01fa 982F      		mov r25,r24
 719 01fc 9695      		lsr r25
 720 01fe 9695      		lsr r25
 721 0200 9695      		lsr r25
 722 0202 21E0      		ldi r18,lo8(1)
 723 0204 30E0      		ldi r19,hi8(1)
 724 0206 00C0      		rjmp 2f
 725 0208 220F      	1:	lsl r18
 726 020a 331F      		rol r19
 727 020c 9A95      	2:	dec r25
 728 020e 02F4      		brpl 1b
 311:../../../src/platform/micaZ/source/ulib.c ****     switch (pin & 0x07)
 730               	.LM73:
 731 0210 90E0      		ldi r25,lo8(0)
 732 0212 8770      		andi r24,lo8(7)
 733 0214 9070      		andi r25,hi8(7)
 734 0216 8230      		cpi r24,2
 735 0218 9105      		cpc r25,__zero_reg__
 736 021a 01F0      		breq .L68
 737 021c 8330      		cpi r24,3
 738 021e 9105      		cpc r25,__zero_reg__
 739 0220 04F4      		brge .L72
 740 0222 0097      		sbiw r24,0
 741 0224 01F0      		breq .L66
 742 0226 8130      		cpi r24,1
 743 0228 9105      		cpc r25,__zero_reg__
 744 022a 01F4      		brne .L74
 745 022c 00C0      		rjmp .L77
 746               	.L72:
 747 022e 8430      		cpi r24,4
 748 0230 9105      		cpc r25,__zero_reg__
 749 0232 01F0      		breq .L70
 750 0234 8430      		cpi r24,4
 751 0236 9105      		cpc r25,__zero_reg__
 752 0238 04F0      		brlt .L69
 753 023a 8530      		cpi r24,5
 754 023c 9105      		cpc r25,__zero_reg__
 755 023e 01F4      		brne .L74
 756 0240 00C0      		rjmp .L78
 757               	.L66:
 313:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTA: PORTA ^= bitvalue;
 759               	.LM74:
 760 0242 8BB3      		in r24,59-32
 761 0244 8227      		eor r24,r18
 762 0246 8BBB      		out 59-32,r24
 763 0248 00C0      		rjmp .L76
 764               	.L77:
 315:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTB: PORTB ^= bitvalue;
 766               	.LM75:
 767 024a 88B3      		in r24,56-32
 768 024c 8227      		eor r24,r18
 769 024e 88BB      		out 56-32,r24
 770 0250 00C0      		rjmp .L76
 771               	.L68:
 317:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTC: PORTC ^= bitvalue;
 773               	.LM76:
 774 0252 85B3      		in r24,53-32
 775 0254 8227      		eor r24,r18
 776 0256 85BB      		out 53-32,r24
 777               	.L76:
 328:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 779               	.LM77:
 780 0258 81E0      		ldi r24,lo8(1)
 318:../../../src/platform/micaZ/source/ulib.c ****             break;
 782               	.LM78:
 783 025a 0895      		ret
 784               	.L69:
 319:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTD: PORTD ^= bitvalue;
 786               	.LM79:
 787 025c 82B3      		in r24,50-32
 788 025e 8227      		eor r24,r18
 789 0260 82BB      		out 50-32,r24
 790 0262 00C0      		rjmp .L76
 791               	.L70:
 321:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTE: PORTE ^= bitvalue;
 793               	.LM80:
 794 0264 83B1      		in r24,35-32
 795 0266 8227      		eor r24,r18
 796 0268 83B9      		out 35-32,r24
 797 026a 00C0      		rjmp .L76
 798               	.L78:
 323:../../../src/platform/micaZ/source/ulib.c ****         case NRK_PORTF: PORTF ^= bitvalue;
 800               	.LM81:
 801 026c 8091 6200 		lds r24,98
 802 0270 8227      		eor r24,r18
 803 0272 8093 6200 		sts 98,r24
 804 0276 00C0      		rjmp .L76
 805               	.L73:
 310:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 807               	.LM82:
 808 0278 8FEF      		ldi r24,lo8(-1)
 809 027a 0895      		ret
 810               	.L74:
 326:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 812               	.LM83:
 813 027c 8FEF      		ldi r24,lo8(-1)
 329:../../../src/platform/micaZ/source/ulib.c **** }
 815               	.LM84:
 816 027e 0895      		ret
 821               	.Lscope10:
 823               		.stabd	78,0,0
 827               	.global	nrk_gpio_direction
 829               	nrk_gpio_direction:
 830               		.stabd	46,0,0
 332:../../../src/platform/micaZ/source/ulib.c **** {
 832               	.LM85:
 833               	.LFBB11:
 834               	/* prologue: function */
 835               	/* frame size = 0 */
 836               	/* stack size = 0 */
 837               	.L__stack_usage = 0
 337:../../../src/platform/micaZ/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 839               	.LM86:
 840 0280 8F3F      		cpi r24,lo8(-1)
 841 0282 01F4      		brne .+2
 842 0284 00C0      		rjmp .L97
 334:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue = BM((pin & 0xF8) >> 3);
 844               	.LM87:
 845 0286 982F      		mov r25,r24
 846 0288 9695      		lsr r25
 847 028a 9695      		lsr r25
 848 028c 9695      		lsr r25
 849 028e 21E0      		ldi r18,lo8(1)
 850 0290 30E0      		ldi r19,hi8(1)
 851 0292 00C0      		rjmp 2f
 852 0294 220F      	1:	lsl r18
 853 0296 331F      		rol r19
 854 0298 9A95      	2:	dec r25
 855 029a 02F4      		brpl 1b
 856 029c 90E0      		ldi r25,lo8(0)
 338:../../../src/platform/micaZ/source/ulib.c ****     if (pin_direction == NRK_PIN_INPUT)
 858               	.LM88:
 859 029e 6623      		tst r22
 860 02a0 01F0      		breq .+2
 861 02a2 00C0      		rjmp .L81
 335:../../../src/platform/micaZ/source/ulib.c ****     uint8_t bitvalue_inv = ~BM((pin & 0xF8) >> 3);
 863               	.LM89:
 864 02a4 322F      		mov r19,r18
 865 02a6 3095      		com r19
 340:../../../src/platform/micaZ/source/ulib.c ****         switch (pin & 0x07)
 867               	.LM90:
 868 02a8 8770      		andi r24,lo8(7)
 869 02aa 9070      		andi r25,hi8(7)
 870 02ac 8230      		cpi r24,2
 871 02ae 9105      		cpc r25,__zero_reg__
 872 02b0 01F0      		breq .L84
 873 02b2 8330      		cpi r24,3
 874 02b4 9105      		cpc r25,__zero_reg__
 875 02b6 04F4      		brge .L88
 876 02b8 0097      		sbiw r24,0
 877 02ba 01F0      		breq .L82
 878 02bc 8130      		cpi r24,1
 879 02be 9105      		cpc r25,__zero_reg__
 880 02c0 01F0      		breq .+2
 881 02c2 00C0      		rjmp .L97
 882 02c4 00C0      		rjmp .L100
 883               	.L88:
 884 02c6 8430      		cpi r24,4
 885 02c8 9105      		cpc r25,__zero_reg__
 886 02ca 01F0      		breq .L86
 887 02cc 8430      		cpi r24,4
 888 02ce 9105      		cpc r25,__zero_reg__
 889 02d0 04F0      		brlt .L85
 890 02d2 8530      		cpi r24,5
 891 02d4 9105      		cpc r25,__zero_reg__
 892 02d6 01F0      		breq .+2
 893 02d8 00C0      		rjmp .L97
 894 02da 00C0      		rjmp .L101
 895               	.L82:
 343:../../../src/platform/micaZ/source/ulib.c ****             DDRA &= bitvalue_inv;
 897               	.LM91:
 898 02dc 8AB3      		in r24,58-32
 899 02de 8323      		and r24,r19
 900 02e0 8ABB      		out 58-32,r24
 344:../../../src/platform/micaZ/source/ulib.c ****             PORTA |= bitvalue;
 902               	.LM92:
 903 02e2 8BB3      		in r24,59-32
 904 02e4 822B      		or r24,r18
 905 02e6 8BBB      		out 59-32,r24
 906 02e8 00C0      		rjmp .L99
 907               	.L100:
 347:../../../src/platform/micaZ/source/ulib.c ****             DDRB &= bitvalue_inv;
 909               	.LM93:
 910 02ea 87B3      		in r24,55-32
 911 02ec 8323      		and r24,r19
 912 02ee 87BB      		out 55-32,r24
 348:../../../src/platform/micaZ/source/ulib.c ****             PORTB |= bitvalue;
 914               	.LM94:
 915 02f0 88B3      		in r24,56-32
 916 02f2 822B      		or r24,r18
 917 02f4 88BB      		out 56-32,r24
 918 02f6 00C0      		rjmp .L99
 919               	.L84:
 351:../../../src/platform/micaZ/source/ulib.c ****             DDRC &= bitvalue_inv;
 921               	.LM95:
 922 02f8 84B3      		in r24,52-32
 923 02fa 8323      		and r24,r19
 924 02fc 84BB      		out 52-32,r24
 352:../../../src/platform/micaZ/source/ulib.c ****             PORTC |= bitvalue;
 926               	.LM96:
 927 02fe 85B3      		in r24,53-32
 928 0300 822B      		or r24,r18
 929 0302 85BB      		out 53-32,r24
 930 0304 00C0      		rjmp .L99
 931               	.L85:
 355:../../../src/platform/micaZ/source/ulib.c ****             DDRD &= bitvalue_inv;
 933               	.LM97:
 934 0306 81B3      		in r24,49-32
 935 0308 8323      		and r24,r19
 936 030a 81BB      		out 49-32,r24
 356:../../../src/platform/micaZ/source/ulib.c ****             PORTD |= bitvalue;
 938               	.LM98:
 939 030c 82B3      		in r24,50-32
 940 030e 822B      		or r24,r18
 941 0310 82BB      		out 50-32,r24
 942 0312 00C0      		rjmp .L99
 943               	.L86:
 359:../../../src/platform/micaZ/source/ulib.c ****             DDRE &= bitvalue_inv;
 945               	.LM99:
 946 0314 82B1      		in r24,34-32
 947 0316 8323      		and r24,r19
 948 0318 82B9      		out 34-32,r24
 360:../../../src/platform/micaZ/source/ulib.c ****             PORTE |= bitvalue;
 950               	.LM100:
 951 031a 83B1      		in r24,35-32
 952 031c 822B      		or r24,r18
 953 031e 83B9      		out 35-32,r24
 954 0320 00C0      		rjmp .L99
 955               	.L101:
 363:../../../src/platform/micaZ/source/ulib.c ****             DDRF &= bitvalue_inv;
 957               	.LM101:
 958 0322 8091 6100 		lds r24,97
 959 0326 8323      		and r24,r19
 960 0328 8093 6100 		sts 97,r24
 364:../../../src/platform/micaZ/source/ulib.c ****             PORTF |= bitvalue;
 962               	.LM102:
 963 032c 8091 6200 		lds r24,98
 964 0330 822B      		or r24,r18
 965 0332 8093 6200 		sts 98,r24
 966 0336 00C0      		rjmp .L99
 967               	.L81:
 372:../../../src/platform/micaZ/source/ulib.c ****         switch (pin & 0x07)
 969               	.LM103:
 970 0338 8770      		andi r24,lo8(7)
 971 033a 9070      		andi r25,hi8(7)
 972 033c 8230      		cpi r24,2
 973 033e 9105      		cpc r25,__zero_reg__
 974 0340 01F0      		breq .L91
 975 0342 8330      		cpi r24,3
 976 0344 9105      		cpc r25,__zero_reg__
 977 0346 04F4      		brge .L95
 978 0348 0097      		sbiw r24,0
 979 034a 01F0      		breq .L89
 980 034c 8130      		cpi r24,1
 981 034e 9105      		cpc r25,__zero_reg__
 982 0350 01F4      		brne .L98
 983 0352 00C0      		rjmp .L102
 984               	.L95:
 985 0354 8430      		cpi r24,4
 986 0356 9105      		cpc r25,__zero_reg__
 987 0358 01F0      		breq .L93
 988 035a 8430      		cpi r24,4
 989 035c 9105      		cpc r25,__zero_reg__
 990 035e 04F0      		brlt .L92
 991 0360 8530      		cpi r24,5
 992 0362 9105      		cpc r25,__zero_reg__
 993 0364 01F4      		brne .L98
 994 0366 00C0      		rjmp .L103
 995               	.L89:
 375:../../../src/platform/micaZ/source/ulib.c ****             DDRA |= bitvalue;
 997               	.LM104:
 998 0368 8AB3      		in r24,58-32
 999 036a 822B      		or r24,r18
 1000 036c 8ABB      		out 58-32,r24
 1001 036e 00C0      		rjmp .L99
 1002               	.L102:
 378:../../../src/platform/micaZ/source/ulib.c ****             DDRB |= bitvalue;
 1004               	.LM105:
 1005 0370 87B3      		in r24,55-32
 1006 0372 822B      		or r24,r18
 1007 0374 87BB      		out 55-32,r24
 1008 0376 00C0      		rjmp .L99
 1009               	.L91:
 381:../../../src/platform/micaZ/source/ulib.c ****             DDRC |= bitvalue;
 1011               	.LM106:
 1012 0378 84B3      		in r24,52-32
 1013 037a 822B      		or r24,r18
 1014 037c 84BB      		out 52-32,r24
 1015 037e 00C0      		rjmp .L99
 1016               	.L92:
 384:../../../src/platform/micaZ/source/ulib.c ****             DDRD |= bitvalue;
 1018               	.LM107:
 1019 0380 81B3      		in r24,49-32
 1020 0382 822B      		or r24,r18
 1021 0384 81BB      		out 49-32,r24
 1022 0386 00C0      		rjmp .L99
 1023               	.L93:
 387:../../../src/platform/micaZ/source/ulib.c ****             DDRE |= bitvalue;
 1025               	.LM108:
 1026 0388 82B1      		in r24,34-32
 1027 038a 822B      		or r24,r18
 1028 038c 82B9      		out 34-32,r24
 1029 038e 00C0      		rjmp .L99
 1030               	.L103:
 390:../../../src/platform/micaZ/source/ulib.c ****             DDRF |= bitvalue;
 1032               	.LM109:
 1033 0390 8091 6100 		lds r24,97
 1034 0394 822B      		or r24,r18
 1035 0396 8093 6100 		sts 97,r24
 1036               	.L99:
 396:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 1038               	.LM110:
 1039 039a 81E0      		ldi r24,lo8(1)
 391:../../../src/platform/micaZ/source/ulib.c ****             break;
 1041               	.LM111:
 1042 039c 0895      		ret
 1043               	.L97:
 367:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 1045               	.LM112:
 1046 039e 8FEF      		ldi r24,lo8(-1)
 1047 03a0 0895      		ret
 1048               	.L98:
 393:../../../src/platform/micaZ/source/ulib.c ****             return -1;
 1050               	.LM113:
 1051 03a2 8FEF      		ldi r24,lo8(-1)
 397:../../../src/platform/micaZ/source/ulib.c **** }
 1053               	.LM114:
 1054 03a4 0895      		ret
 1060               	.Lscope11:
 1062               		.stabd	78,0,0
 1065               	.global	nrk_get_button
 1067               	nrk_get_button:
 1068               		.stabd	46,0,0
 401:../../../src/platform/micaZ/source/ulib.c **** {
 1070               	.LM115:
 1071               	.LFBB12:
 1072               	/* prologue: function */
 1073               	/* frame size = 0 */
 1074               	/* stack size = 0 */
 1075               	.L__stack_usage = 0
 403:../../../src/platform/micaZ/source/ulib.c **** }
 1077               	.LM116:
 1078 03a6 8FEF      		ldi r24,lo8(-1)
 1079               	/* epilogue start */
 1080 03a8 0895      		ret
 1082               	.Lscope12:
 1084               		.stabd	78,0,0
 1087               	.global	nrk_led_toggle
 1089               	nrk_led_toggle:
 1090               		.stabd	46,0,0
 408:../../../src/platform/micaZ/source/ulib.c **** {
 1092               	.LM117:
 1093               	.LFBB13:
 1094               	/* prologue: function */
 1095               	/* frame size = 0 */
 1096               	/* stack size = 0 */
 1097               	.L__stack_usage = 0
 411:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_toggle(NRK_LED_0);
 1099               	.LM118:
 1100 03aa 0097      		sbiw r24,0
 1101 03ac 01F4      		brne .L106
 411:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_toggle(NRK_LED_0);
 1103               	.LM119:
 1104 03ae 80E0      		ldi r24,lo8(0)
 1105 03b0 00C0      		rjmp .L110
 1106               	.L106:
 412:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_toggle(NRK_LED_1);
 1108               	.LM120:
 1109 03b2 8130      		cpi r24,1
 1110 03b4 9105      		cpc r25,__zero_reg__
 1111 03b6 01F4      		brne .L108
 412:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_toggle(NRK_LED_1);
 1113               	.LM121:
 1114 03b8 88E0      		ldi r24,lo8(8)
 1115 03ba 00C0      		rjmp .L110
 1116               	.L108:
 413:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_toggle(NRK_LED_2);
 1118               	.LM122:
 1119 03bc 8230      		cpi r24,2
 1120 03be 9105      		cpc r25,__zero_reg__
 1121 03c0 01F4      		brne .L109
 413:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_toggle(NRK_LED_2);
 1123               	.LM123:
 1124 03c2 80E1      		ldi r24,lo8(16)
 1125               	.L110:
 1126 03c4 0E94 0000 		call nrk_gpio_toggle
 416:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 1128               	.LM124:
 1129 03c8 81E0      		ldi r24,lo8(1)
 1130 03ca 0895      		ret
 1131               	.L109:
 414:../../../src/platform/micaZ/source/ulib.c ****     else            return -1;
 1133               	.LM125:
 1134 03cc 8FEF      		ldi r24,lo8(-1)
 417:../../../src/platform/micaZ/source/ulib.c **** }
 1136               	.LM126:
 1137 03ce 0895      		ret
 1139               	.Lscope13:
 1141               		.stabd	78,0,0
 1144               	.global	nrk_led_clr
 1146               	nrk_led_clr:
 1147               		.stabd	46,0,0
 420:../../../src/platform/micaZ/source/ulib.c **** {
 1149               	.LM127:
 1150               	.LFBB14:
 1151               	/* prologue: function */
 1152               	/* frame size = 0 */
 1153               	/* stack size = 0 */
 1154               	.L__stack_usage = 0
 423:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_set(NRK_LED_0);
 1156               	.LM128:
 1157 03d0 0097      		sbiw r24,0
 1158 03d2 01F4      		brne .L112
 423:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_set(NRK_LED_0);
 1160               	.LM129:
 1161 03d4 80E0      		ldi r24,lo8(0)
 1162 03d6 00C0      		rjmp .L116
 1163               	.L112:
 424:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_set(NRK_LED_1);
 1165               	.LM130:
 1166 03d8 8130      		cpi r24,1
 1167 03da 9105      		cpc r25,__zero_reg__
 1168 03dc 01F4      		brne .L114
 424:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_set(NRK_LED_1);
 1170               	.LM131:
 1171 03de 88E0      		ldi r24,lo8(8)
 1172 03e0 00C0      		rjmp .L116
 1173               	.L114:
 425:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_set(NRK_LED_2);
 1175               	.LM132:
 1176 03e2 8230      		cpi r24,2
 1177 03e4 9105      		cpc r25,__zero_reg__
 1178 03e6 01F4      		brne .L115
 425:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_set(NRK_LED_2);
 1180               	.LM133:
 1181 03e8 80E1      		ldi r24,lo8(16)
 1182               	.L116:
 1183 03ea 0E94 0000 		call nrk_gpio_set
 428:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 1185               	.LM134:
 1186 03ee 81E0      		ldi r24,lo8(1)
 1187 03f0 0895      		ret
 1188               	.L115:
 426:../../../src/platform/micaZ/source/ulib.c ****     else            return -1;
 1190               	.LM135:
 1191 03f2 8FEF      		ldi r24,lo8(-1)
 429:../../../src/platform/micaZ/source/ulib.c **** }
 1193               	.LM136:
 1194 03f4 0895      		ret
 1196               	.Lscope14:
 1198               		.stabd	78,0,0
 1200               	.global	nrk_setup_ports
 1202               	nrk_setup_ports:
 1203               		.stabd	46,0,0
 145:../../../src/platform/micaZ/source/ulib.c **** {
 1205               	.LM137:
 1206               	.LFBB15:
 1207               	/* prologue: function */
 1208               	/* frame size = 0 */
 1209               	/* stack size = 0 */
 1210               	.L__stack_usage = 0
 146:../../../src/platform/micaZ/source/ulib.c ****     PORT_INIT();
 1212               	.LM138:
 1213 03f6 80B5      		in r24,64-32
 1214 03f8 8460      		ori r24,lo8(4)
 1215 03fa 80BD      		out 64-32,r24
 1216 03fc 87E0      		ldi r24,lo8(7)
 1217 03fe 87BB      		out 55-32,r24
 1218 0400 88BB      		out 56-32,r24
 1219 0402 8FEF      		ldi r24,lo8(-1)
 1220 0404 84BB      		out 52-32,r24
 1221 0406 15BA      		out 53-32,__zero_reg__
 1222 0408 82E0      		ldi r24,lo8(2)
 1223 040a 82B9      		out 34-32,r24
 1224 040c 87E6      		ldi r24,lo8(103)
 1225 040e 8ABB      		out 58-32,r24
 1226 0410 80E4      		ldi r24,lo8(64)
 1227 0412 8BBB      		out 59-32,r24
 147:../../../src/platform/micaZ/source/ulib.c ****     SPI_INIT();
 1229               	.LM139:
 1230 0414 80E5      		ldi r24,lo8(80)
 1231 0416 8DB9      		out 45-32,r24
 1232 0418 81E0      		ldi r24,lo8(1)
 1233 041a 8EB9      		out 46-32,r24
 149:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(0);
 1235               	.LM140:
 1236 041c 80E0      		ldi r24,lo8(0)
 1237 041e 90E0      		ldi r25,hi8(0)
 1238 0420 0E94 0000 		call nrk_led_clr
 150:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(1);
 1240               	.LM141:
 1241 0424 81E0      		ldi r24,lo8(1)
 1242 0426 90E0      		ldi r25,hi8(1)
 1243 0428 0E94 0000 		call nrk_led_clr
 151:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(2);
 1245               	.LM142:
 1246 042c 82E0      		ldi r24,lo8(2)
 1247 042e 90E0      		ldi r25,hi8(2)
 1248 0430 0E94 0000 		call nrk_led_clr
 152:../../../src/platform/micaZ/source/ulib.c ****     nrk_led_clr(3);
 1250               	.LM143:
 1251 0434 83E0      		ldi r24,lo8(3)
 1252 0436 90E0      		ldi r25,hi8(3)
 1253 0438 0E94 0000 		call nrk_led_clr
 1254               	/* epilogue start */
 153:../../../src/platform/micaZ/source/ulib.c **** }
 1256               	.LM144:
 1257 043c 0895      		ret
 1259               	.Lscope15:
 1261               		.stabd	78,0,0
 1264               	.global	nrk_led_set
 1266               	nrk_led_set:
 1267               		.stabd	46,0,0
 432:../../../src/platform/micaZ/source/ulib.c **** {
 1269               	.LM145:
 1270               	.LFBB16:
 1271               	/* prologue: function */
 1272               	/* frame size = 0 */
 1273               	/* stack size = 0 */
 1274               	.L__stack_usage = 0
 435:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_clr(NRK_LED_0);
 1276               	.LM146:
 1277 043e 0097      		sbiw r24,0
 1278 0440 01F4      		brne .L119
 435:../../../src/platform/micaZ/source/ulib.c ****     if(led==0)      nrk_gpio_clr(NRK_LED_0);
 1280               	.LM147:
 1281 0442 80E0      		ldi r24,lo8(0)
 1282 0444 00C0      		rjmp .L123
 1283               	.L119:
 436:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_clr(NRK_LED_1);
 1285               	.LM148:
 1286 0446 8130      		cpi r24,1
 1287 0448 9105      		cpc r25,__zero_reg__
 1288 044a 01F4      		brne .L121
 436:../../../src/platform/micaZ/source/ulib.c ****     else if(led==1) nrk_gpio_clr(NRK_LED_1);
 1290               	.LM149:
 1291 044c 88E0      		ldi r24,lo8(8)
 1292 044e 00C0      		rjmp .L123
 1293               	.L121:
 437:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_clr(NRK_LED_2);
 1295               	.LM150:
 1296 0450 8230      		cpi r24,2
 1297 0452 9105      		cpc r25,__zero_reg__
 1298 0454 01F4      		brne .L122
 437:../../../src/platform/micaZ/source/ulib.c ****     else if(led==2) nrk_gpio_clr(NRK_LED_2);
 1300               	.LM151:
 1301 0456 80E1      		ldi r24,lo8(16)
 1302               	.L123:
 1303 0458 0E94 0000 		call nrk_gpio_clr
 440:../../../src/platform/micaZ/source/ulib.c ****     return 1;
 1305               	.LM152:
 1306 045c 81E0      		ldi r24,lo8(1)
 1307 045e 0895      		ret
 1308               	.L122:
 438:../../../src/platform/micaZ/source/ulib.c ****     else            return -1;
 1310               	.LM153:
 1311 0460 8FEF      		ldi r24,lo8(-1)
 441:../../../src/platform/micaZ/source/ulib.c **** }
 1313               	.LM154:
 1314 0462 0895      		ret
 1316               	.Lscope16:
 1318               		.stabd	78,0,0
 1321               	.global	putc1
 1323               	putc1:
 1324               		.stabd	46,0,0
 468:../../../src/platform/micaZ/source/ulib.c **** 
 469:../../../src/platform/micaZ/source/ulib.c **** void putc1(char x)
 470:../../../src/platform/micaZ/source/ulib.c **** {
 1326               	.LM155:
 1327               	.LFBB17:
 1328               	/* prologue: function */
 1329               	/* frame size = 0 */
 1330               	/* stack size = 0 */
 1331               	.L__stack_usage = 0
 1332               	.L125:
 471:../../../src/platform/micaZ/source/ulib.c ****     UART1_WAIT_AND_SEND(x);
 1334               	.LM156:
 1335 0464 9091 9B00 		lds r25,155
 1336 0468 95FF      		sbrs r25,5
 1337 046a 00C0      		rjmp .L125
 1339               	.LM157:
 1340 046c 9091 9B00 		lds r25,155
 1341 0470 9F7D      		andi r25,lo8(-33)
 1342 0472 9093 9B00 		sts 155,r25
 1343 0476 8093 9C00 		sts 156,r24
 1344               	/* epilogue start */
 472:../../../src/platform/micaZ/source/ulib.c **** }
 1346               	.LM158:
 1347 047a 0895      		ret
 1349               	.Lscope17:
 1351               		.stabd	78,0,0
 1353               	.global	setup_uart0
 1355               	setup_uart0:
 1356               		.stabd	46,0,0
 473:../../../src/platform/micaZ/source/ulib.c **** 
 474:../../../src/platform/micaZ/source/ulib.c **** /* print uart string */
 475:../../../src/platform/micaZ/source/ulib.c **** /*
 476:../../../src/platform/micaZ/source/ulib.c **** void printus1(char *x)
 477:../../../src/platform/micaZ/source/ulib.c **** {
 478:../../../src/platform/micaZ/source/ulib.c ****      int i=0;
 479:../../../src/platform/micaZ/source/ulib.c ****      while(x[i]!='\0'){
 480:../../../src/platform/micaZ/source/ulib.c ****      UART1_WAIT_AND_SEND(x[i]);
 481:../../../src/platform/micaZ/source/ulib.c ****      i++;
 482:../../../src/platform/micaZ/source/ulib.c ****      }
 483:../../../src/platform/micaZ/source/ulib.c **** }
 484:../../../src/platform/micaZ/source/ulib.c **** 
 485:../../../src/platform/micaZ/source/ulib.c **** void printus0(char *x)
 486:../../../src/platform/micaZ/source/ulib.c **** {
 487:../../../src/platform/micaZ/source/ulib.c ****      int i=0;
 488:../../../src/platform/micaZ/source/ulib.c ****      while(x[i]!='\0'){
 489:../../../src/platform/micaZ/source/ulib.c ****      UART0_WAIT_AND_SEND(x[i]);
 490:../../../src/platform/micaZ/source/ulib.c ****      i++;
 491:../../../src/platform/micaZ/source/ulib.c ****      }
 492:../../../src/platform/micaZ/source/ulib.c **** }
 493:../../../src/platform/micaZ/source/ulib.c **** */
 494:../../../src/platform/micaZ/source/ulib.c **** void setup_uart0(uint16_t baudrate)
 495:../../../src/platform/micaZ/source/ulib.c **** {
 1358               	.LM159:
 1359               	.LFBB18:
 1360               	/* prologue: function */
 1361               	/* frame size = 0 */
 1362               	/* stack size = 0 */
 1363               	.L__stack_usage = 0
 496:../../../src/platform/micaZ/source/ulib.c **** //INIT_UART1( UART_BAUDRATE_115K2, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_B
 497:../../../src/platform/micaZ/source/ulib.c ****     INIT_UART0( baudrate, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_BIT));
 1365               	.LM160:
 1366 047c 9093 9000 		sts 144,r25
 1367 0480 89B9      		out 41-32,r24
 1368 0482 86E0      		ldi r24,lo8(6)
 1369 0484 8093 9500 		sts 149,r24
 1370 0488 5298      		cbi 42-32,2
 1371 048a 599A      		sbi 43-32,1
 498:../../../src/platform/micaZ/source/ulib.c ****     ENABLE_UART0();
 1373               	.LM161:
 1374 048c 8AB1      		in r24,42-32
 1375 048e 8861      		ori r24,lo8(24)
 1376 0490 8AB9      		out 42-32,r24
 1377               	/* epilogue start */
 499:../../../src/platform/micaZ/source/ulib.c **** }
 1379               	.LM162:
 1380 0492 0895      		ret
 1382               	.Lscope18:
 1384               		.stabd	78,0,0
 1387               	.global	nrk_setup_uart
 1389               	nrk_setup_uart:
 1390               		.stabd	46,0,0
 500:../../../src/platform/micaZ/source/ulib.c **** 
 501:../../../src/platform/micaZ/source/ulib.c **** 
 502:../../../src/platform/micaZ/source/ulib.c **** /**
 503:../../../src/platform/micaZ/source/ulib.c ****  * nrk_setup_uart()
 504:../../../src/platform/micaZ/source/ulib.c ****  *
 505:../../../src/platform/micaZ/source/ulib.c ****  * Sets a default uart for a given platform and
 506:../../../src/platform/micaZ/source/ulib.c ****  * direct stdin and stdout to that port.
 507:../../../src/platform/micaZ/source/ulib.c ****  *
 508:../../../src/platform/micaZ/source/ulib.c ****  * More advanced UART usage will require manually
 509:../../../src/platform/micaZ/source/ulib.c ****  * setting parameters.
 510:../../../src/platform/micaZ/source/ulib.c ****  */
 511:../../../src/platform/micaZ/source/ulib.c **** void nrk_setup_uart(uint16_t baudrate)
 512:../../../src/platform/micaZ/source/ulib.c **** {
 1392               	.LM163:
 1393               	.LFBB19:
 1394 0494 0F93      		push r16
 1395 0496 1F93      		push r17
 1396 0498 CF93      		push r28
 1397 049a DF93      		push r29
 1398               	/* prologue: function */
 1399               	/* frame size = 0 */
 1400               	/* stack size = 4 */
 1401               	.L__stack_usage = 4
 513:../../../src/platform/micaZ/source/ulib.c **** 
 514:../../../src/platform/micaZ/source/ulib.c ****     //setup_uart1(baudrate);
 515:../../../src/platform/micaZ/source/ulib.c ****     setup_uart0(baudrate);
 1403               	.LM164:
 1404 049c 0E94 0000 		call setup_uart0
 516:../../../src/platform/micaZ/source/ulib.c **** 
 517:../../../src/platform/micaZ/source/ulib.c ****     stdout = fdevopen( putc0, getc0);
 1406               	.LM165:
 1407 04a0 C0E0      		ldi r28,lo8(gs(putc0))
 1408 04a2 D0E0      		ldi r29,hi8(gs(putc0))
 1409 04a4 00E0      		ldi r16,lo8(gs(getc0))
 1410 04a6 10E0      		ldi r17,hi8(gs(getc0))
 1411 04a8 CE01      		movw r24,r28
 1412 04aa B801      		movw r22,r16
 1413 04ac 0E94 0000 		call fdevopen
 1414 04b0 9093 0000 		sts __iob+2+1,r25
 1415 04b4 8093 0000 		sts __iob+2,r24
 518:../../../src/platform/micaZ/source/ulib.c ****     stdin = fdevopen( putc0, getc0);
 1417               	.LM166:
 1418 04b8 CE01      		movw r24,r28
 1419 04ba B801      		movw r22,r16
 1420 04bc 0E94 0000 		call fdevopen
 1421 04c0 9093 0000 		sts __iob+1,r25
 1422 04c4 8093 0000 		sts __iob,r24
 1423               	/* epilogue start */
 519:../../../src/platform/micaZ/source/ulib.c **** 
 520:../../../src/platform/micaZ/source/ulib.c **** #ifdef NRK_UART_BUF
 521:../../../src/platform/micaZ/source/ulib.c ****     uart_rx_signal=nrk_signal_create();
 522:../../../src/platform/micaZ/source/ulib.c ****     if(uart_rx_signal==NRK_ERROR) nrk_error_add(NRK_SIGNAL_CREATE_ERROR);
 523:../../../src/platform/micaZ/source/ulib.c ****     uart_rx_buf_start=0;
 524:../../../src/platform/micaZ/source/ulib.c ****     uart_rx_buf_end=0;
 525:../../../src/platform/micaZ/source/ulib.c ****     ENABLE_UART0_RX_INT();
 526:../../../src/platform/micaZ/source/ulib.c **** #endif
 527:../../../src/platform/micaZ/source/ulib.c **** 
 528:../../../src/platform/micaZ/source/ulib.c **** 
 529:../../../src/platform/micaZ/source/ulib.c **** 
 530:../../../src/platform/micaZ/source/ulib.c **** }
 1425               	.LM167:
 1426 04c8 DF91      		pop r29
 1427 04ca CF91      		pop r28
 1428 04cc 1F91      		pop r17
 1429 04ce 0F91      		pop r16
 1430 04d0 0895      		ret
 1432               	.Lscope19:
 1434               		.stabd	78,0,0
 1436               	.global	setup_uart1
 1438               	setup_uart1:
 1439               		.stabd	46,0,0
 531:../../../src/platform/micaZ/source/ulib.c **** 
 532:../../../src/platform/micaZ/source/ulib.c **** void setup_uart1(uint16_t baudrate)
 533:../../../src/platform/micaZ/source/ulib.c **** {
 1441               	.LM168:
 1442               	.LFBB20:
 1443               	/* prologue: function */
 1444               	/* frame size = 0 */
 1445               	/* stack size = 0 */
 1446               	.L__stack_usage = 0
 534:../../../src/platform/micaZ/source/ulib.c **** //INIT_UART1( UART_BAUDRATE_115K2, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_B
 535:../../../src/platform/micaZ/source/ulib.c ****     INIT_UART1( baudrate, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_BIT));
 1448               	.LM169:
 1449 04d2 9093 9800 		sts 152,r25
 1450 04d6 8093 9900 		sts 153,r24
 1451 04da 86E0      		ldi r24,lo8(6)
 1452 04dc 8093 9D00 		sts 157,r24
 1453 04e0 EAE9      		ldi r30,lo8(154)
 1454 04e2 F0E0      		ldi r31,hi8(154)
 1455 04e4 8081      		ld r24,Z
 1456 04e6 8B7F      		andi r24,lo8(-5)
 1457 04e8 8083      		st Z,r24
 1458 04ea ABE9      		ldi r26,lo8(155)
 1459 04ec B0E0      		ldi r27,hi8(155)
 1460 04ee 8C91      		ld r24,X
 1461 04f0 8260      		ori r24,lo8(2)
 1462 04f2 8C93      		st X,r24
 536:../../../src/platform/micaZ/source/ulib.c ****     ENABLE_UART1();
 1464               	.LM170:
 1465 04f4 8081      		ld r24,Z
 1466 04f6 8861      		ori r24,lo8(24)
 1467 04f8 8083      		st Z,r24
 1468               	/* epilogue start */
 537:../../../src/platform/micaZ/source/ulib.c **** }
 1470               	.LM171:
 1471 04fa 0895      		ret
 1473               	.Lscope20:
 1475               		.stabd	78,0,0
 1477               	.global	getc1
 1479               	getc1:
 1480               		.stabd	46,0,0
 538:../../../src/platform/micaZ/source/ulib.c **** 
 539:../../../src/platform/micaZ/source/ulib.c **** 
 540:../../../src/platform/micaZ/source/ulib.c **** 
 541:../../../src/platform/micaZ/source/ulib.c **** char getc1(void)
 542:../../../src/platform/micaZ/source/ulib.c **** {
 1482               	.LM172:
 1483               	.LFBB21:
 1484               	/* prologue: function */
 1485               	/* frame size = 0 */
 1486               	/* stack size = 0 */
 1487               	.L__stack_usage = 0
 1488               	.L131:
 543:../../../src/platform/micaZ/source/ulib.c ****     unsigned char tmp;
 544:../../../src/platform/micaZ/source/ulib.c ****     UART1_WAIT_AND_RECEIVE(tmp);
 1490               	.LM173:
 1491 04fc 8091 9B00 		lds r24,155
 1492 0500 87FF      		sbrs r24,7
 1493 0502 00C0      		rjmp .L131
 1495               	.LM174:
 1496 0504 8091 9B00 		lds r24,155
 1497 0508 8F77      		andi r24,lo8(127)
 1498 050a 8093 9B00 		sts 155,r24
 1499 050e 8091 9C00 		lds r24,156
 1500               	/* epilogue start */
 545:../../../src/platform/micaZ/source/ulib.c ****     return tmp;
 546:../../../src/platform/micaZ/source/ulib.c **** }
 1502               	.LM175:
 1503 0512 0895      		ret
 1508               	.Lscope21:
 1510               		.stabd	78,0,0
 1511               	.global	NRK_LED_0
 1512               		.data
 1515               	NRK_LED_0:
 1516 0000 00        		.skip 1,0
 1517               	.global	NRK_LED_1
 1520               	NRK_LED_1:
 1521 0001 08        		.byte	8
 1522               	.global	NRK_LED_2
 1525               	NRK_LED_2:
 1526 0002 10        		.byte	16
 1527               	.global	NRK_VREG_EN
 1530               	NRK_VREG_EN:
 1531 0003 28        		.byte	40
 1532               	.global	NRK_RESET_N
 1535               	NRK_RESET_N:
 1536 0004 30        		.byte	48
 1537               	.global	NRK_CSN
 1540               	NRK_CSN:
 1541 0005 01        		.byte	1
 1542               	.global	NRK_SCK
 1545               	NRK_SCK:
 1546 0006 09        		.byte	9
 1547               	.global	NRK_MOSI
 1550               	NRK_MOSI:
 1551 0007 11        		.byte	17
 1552               	.global	NRK_MISO
 1555               	NRK_MISO:
 1556 0008 19        		.byte	25
 1557               	.global	NRK_FIFO
 1560               	NRK_FIFO:
 1561 0009 39        		.byte	57
 1562               	.global	NRK_UART1_RXD
 1565               	NRK_UART1_RXD:
 1566 000a 13        		.byte	19
 1567               	.global	NRK_UART1_TXD
 1570               	NRK_UART1_TXD:
 1571 000b 1B        		.byte	27
 1572               	.global	NRK_SFD
 1575               	NRK_SFD:
 1576 000c 23        		.byte	35
 1577               	.global	NRK_UART1_RTS
 1580               	NRK_UART1_RTS:
 1581 000d 2B        		.byte	43
 1582               	.global	NRK_CCA
 1585               	NRK_CCA:
 1586 000e 33        		.byte	51
 1587               	.global	NRK_UART1_CTS
 1590               	NRK_UART1_CTS:
 1591 000f 3B        		.byte	59
 1592               	.global	NRK_UART0_RXD
 1595               	NRK_UART0_RXD:
 1596 0010 04        		.byte	4
 1597               	.global	NRK_UART0_TXD
 1600               	NRK_UART0_TXD:
 1601 0011 0C        		.byte	12
 1602               	.global	NRK_FIFOP
 1605               	NRK_FIFOP:
 1606 0012 34        		.byte	52
 1607               	.global	NRK_ADC_INPUT_0
 1610               	NRK_ADC_INPUT_0:
 1611 0013 05        		.byte	5
 1612               	.global	NRK_ADC_INPUT_1
 1615               	NRK_ADC_INPUT_1:
 1616 0014 0D        		.byte	13
 1617               	.global	NRK_ADC_INPUT_2
 1620               	NRK_ADC_INPUT_2:
 1621 0015 15        		.byte	21
 1622               	.global	NRK_ADC_INPUT_3
 1625               	NRK_ADC_INPUT_3:
 1626 0016 1D        		.byte	29
 1627               	.global	NRK_ADC_INPUT_6
 1630               	NRK_ADC_INPUT_6:
 1631 0017 35        		.byte	53
 1632               	.global	NRK_ADC_INPUT_7
 1635               	NRK_ADC_INPUT_7:
 1636 0018 3D        		.byte	61
 1637               	.global	NRK_DEBUG_0
 1640               	NRK_DEBUG_0:
 1641 0019 0A        		.byte	10
 1642               	.global	NRK_DEBUG_1
 1645               	NRK_DEBUG_1:
 1646 001a 12        		.byte	18
 1647               	.global	NRK_DEBUG_2
 1650               	NRK_DEBUG_2:
 1651 001b FF        		.byte	-1
 1652               	.global	NRK_DEBUG_3
 1655               	NRK_DEBUG_3:
 1656 001c FF        		.byte	-1
 1657               	.global	NRK_LED_3
 1660               	NRK_LED_3:
 1661 001d FF        		.byte	-1
 1662               	.global	NRK_BLED
 1665               	NRK_BLED:
 1666 001e FF        		.byte	-1
 1667               	.global	NRK_SPI_SS
 1670               	NRK_SPI_SS:
 1671 001f FF        		.byte	-1
 1672               	.global	NRK_GPIO26
 1675               	NRK_GPIO26:
 1676 0020 FF        		.byte	-1
 1677               	.global	NRK_GPIO28
 1680               	NRK_GPIO28:
 1681 0021 FF        		.byte	-1
 1682               	.global	NRK_GPIO34
 1685               	NRK_GPIO34:
 1686 0022 FF        		.byte	-1
 1687               		.comm _nrk_signal_list,4,1
 1688               		.comm error_task,1,1
 1689               		.comm error_num,1,1
 1728               		.text
 1730               	.Letext0:
 1731               	.global __do_copy_data
 1732               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:00000000 ulib.c
     /tmp/ccZRGXUv.s:2      *ABS*:0000003f __SREG__
     /tmp/ccZRGXUv.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccZRGXUv.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccZRGXUv.s:5      *ABS*:00000034 __CCP__
     /tmp/ccZRGXUv.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccZRGXUv.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccZRGXUv.s:122    .text:00000000 getc0
     /tmp/ccZRGXUv.s:155    .text:0000000a putc0
     /tmp/ccZRGXUv.s:184    .text:00000014 nrk_uart_rx_signal_get
     /tmp/ccZRGXUv.s:206    .text:00000018 nrk_uart_data_ready
     /tmp/ccZRGXUv.s:253    .text:00000034 nrk_kprintf
     /tmp/ccZRGXUv.s:309    .text:0000005a nrk_gpio_set
     /tmp/ccZRGXUv.s:435    .text:000000e6 nrk_gpio_clr
     /tmp/ccZRGXUv.s:562    .text:00000174 nrk_gpio_get
     /tmp/ccZRGXUv.s:664    .text:000001e0 nrk_gpio_pullups
     /tmp/ccZRGXUv.s:702    .text:000001f4 nrk_gpio_toggle
     /tmp/ccZRGXUv.s:829    .text:00000280 nrk_gpio_direction
     /tmp/ccZRGXUv.s:1067   .text:000003a6 nrk_get_button
     /tmp/ccZRGXUv.s:1089   .text:000003aa nrk_led_toggle
     /tmp/ccZRGXUv.s:1146   .text:000003d0 nrk_led_clr
     /tmp/ccZRGXUv.s:1202   .text:000003f6 nrk_setup_ports
     /tmp/ccZRGXUv.s:1266   .text:0000043e nrk_led_set
     /tmp/ccZRGXUv.s:1323   .text:00000464 putc1
     /tmp/ccZRGXUv.s:1355   .text:0000047c setup_uart0
     /tmp/ccZRGXUv.s:1389   .text:00000494 nrk_setup_uart
     /tmp/ccZRGXUv.s:1438   .text:000004d2 setup_uart1
     /tmp/ccZRGXUv.s:1479   .text:000004fc getc1
     /tmp/ccZRGXUv.s:1515   .data:00000000 NRK_LED_0
     /tmp/ccZRGXUv.s:1520   .data:00000001 NRK_LED_1
     /tmp/ccZRGXUv.s:1525   .data:00000002 NRK_LED_2
     /tmp/ccZRGXUv.s:1530   .data:00000003 NRK_VREG_EN
     /tmp/ccZRGXUv.s:1535   .data:00000004 NRK_RESET_N
     /tmp/ccZRGXUv.s:1540   .data:00000005 NRK_CSN
     /tmp/ccZRGXUv.s:1545   .data:00000006 NRK_SCK
     /tmp/ccZRGXUv.s:1550   .data:00000007 NRK_MOSI
     /tmp/ccZRGXUv.s:1555   .data:00000008 NRK_MISO
     /tmp/ccZRGXUv.s:1560   .data:00000009 NRK_FIFO
     /tmp/ccZRGXUv.s:1565   .data:0000000a NRK_UART1_RXD
     /tmp/ccZRGXUv.s:1570   .data:0000000b NRK_UART1_TXD
     /tmp/ccZRGXUv.s:1575   .data:0000000c NRK_SFD
     /tmp/ccZRGXUv.s:1580   .data:0000000d NRK_UART1_RTS
     /tmp/ccZRGXUv.s:1585   .data:0000000e NRK_CCA
     /tmp/ccZRGXUv.s:1590   .data:0000000f NRK_UART1_CTS
     /tmp/ccZRGXUv.s:1595   .data:00000010 NRK_UART0_RXD
     /tmp/ccZRGXUv.s:1600   .data:00000011 NRK_UART0_TXD
     /tmp/ccZRGXUv.s:1605   .data:00000012 NRK_FIFOP
     /tmp/ccZRGXUv.s:1610   .data:00000013 NRK_ADC_INPUT_0
     /tmp/ccZRGXUv.s:1615   .data:00000014 NRK_ADC_INPUT_1
     /tmp/ccZRGXUv.s:1620   .data:00000015 NRK_ADC_INPUT_2
     /tmp/ccZRGXUv.s:1625   .data:00000016 NRK_ADC_INPUT_3
     /tmp/ccZRGXUv.s:1630   .data:00000017 NRK_ADC_INPUT_6
     /tmp/ccZRGXUv.s:1635   .data:00000018 NRK_ADC_INPUT_7
     /tmp/ccZRGXUv.s:1640   .data:00000019 NRK_DEBUG_0
     /tmp/ccZRGXUv.s:1645   .data:0000001a NRK_DEBUG_1
     /tmp/ccZRGXUv.s:1650   .data:0000001b NRK_DEBUG_2
     /tmp/ccZRGXUv.s:1655   .data:0000001c NRK_DEBUG_3
     /tmp/ccZRGXUv.s:1660   .data:0000001d NRK_LED_3
     /tmp/ccZRGXUv.s:1665   .data:0000001e NRK_BLED
     /tmp/ccZRGXUv.s:1670   .data:0000001f NRK_SPI_SS
     /tmp/ccZRGXUv.s:1675   .data:00000020 NRK_GPIO26
     /tmp/ccZRGXUv.s:1680   .data:00000021 NRK_GPIO28
     /tmp/ccZRGXUv.s:1685   .data:00000022 NRK_GPIO34
                            *COM*:00000004 _nrk_signal_list
                            *COM*:00000001 error_task
                            *COM*:00000001 error_num

UNDEFINED SYMBOLS
__iob
fputc
fdevopen
__do_copy_data
__do_clear_bss
